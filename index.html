<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متجر الخصوصية العالمي المتطور - الجيل الجديد من التسوق</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366F1',
                        secondary: '#EC4899',
                        accent: '#8B5CF6',
                        gold: '#F59E0B',
                        emerald: '#10B981',
                        rose: '#F43F5E',
                        neon: {
                            pink: '#FF0080',
                            blue: '#00FFFF',
                            green: '#39FF14',
                            purple: '#BF00FF'
                        }
                    },
                    fontFamily: {
                        arabic: ['Tajawal', 'Arial', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'gradient': 'gradient 15s ease infinite',
                        'matrix': 'matrix 20s linear infinite',
                        'neon': 'neon 1.5s ease-in-out infinite alternate',
                        'cyber': 'cyber 3s ease-in-out infinite',
                        'hologram': 'hologram 4s ease-in-out infinite',
                        'scan': 'scan 2s linear infinite',
                        'glitch': 'glitch 0.3s infinite',
                        'typewriter': 'typewriter 4s steps(40) infinite'
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&amp;family=Orbitron:wght@400;700;900&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', Arial, sans-serif;
            font-weight: 700;
            overflow-x: hidden;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .dark body {
            background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 100%);
        }

        /* Futuristic Animations */
        @keyframes matrix {
            0% { transform: translateY(-100vh); }
            100% { transform: translateY(100vh); }
        }

        @keyframes neon {
            from { 
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073, 0 0 50px #e60073, 0 0 60px #e60073, 0 0 70px #e60073;
            }
            to { 
                text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #e60073, 0 0 20px #e60073, 0 0 25px #e60073, 0 0 30px #e60073, 0 0 35px #e60073;
            }
        }

        @keyframes cyber {
            0%, 100% { transform: perspective(400px) rotateY(0deg); }
            50% { transform: perspective(400px) rotateY(5deg); }
        }

        @keyframes hologram {
            0%, 100% { opacity: 1; transform: translateZ(0); }
            50% { opacity: 0.7; transform: translateZ(20px); }
        }

        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); }
        }

        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }

        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(99, 102, 241, 0.5); }
            to { box-shadow: 0 0 30px rgba(99, 102, 241, 0.8), 0 0 40px rgba(99, 102, 241, 0.3); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Particles Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Matrix Effect */
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            opacity: 0.1;
        }

        .matrix-char {
            position: absolute;
            color: #00FF41;
            font-family: 'Orbitron', monospace;
            font-size: 20px;
            animation: matrix 20s linear infinite;
        }

        /* Cyber Scan Effect */
        .cyber-scan {
            position: fixed;
            top: 0;
            left: -100px;
            width: 100px;
            height: 100vh;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.6), transparent);
            animation: scan 5s linear infinite;
            z-index: 1;
            pointer-events: none;
        }

        /* Enhanced Glass Effect */
        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .glass-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: scan 3s linear infinite;
        }
        
        .dark .glass-effect {
            background: rgba(55, 65, 81, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        /* Advanced Card Effects */
        .card-hover {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .card-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
            z-index: 1;
        }

        .card-hover:hover::before {
            left: 100%;
        }

        .card-hover:hover {
            transform: translateY(-15px) rotateX(5deg) scale(1.03);
            box-shadow: 0 35px 70px rgba(0,0,0,0.2);
        }

        .dark .card-hover:hover {
            box-shadow: 0 35px 70px rgba(255,255,255,0.1);
        }

        /* Neon Text Effects */
        .neon-text {
            animation: neon 1.5s ease-in-out infinite alternate;
        }

        .cyber-text {
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        /* Holographic Effects */
        .hologram {
            background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff, #06ffa5, #ffbe0b);
            background-size: 400% 400%;
            animation: gradient 3s ease infinite;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Advanced Buttons */
        .btn-cyber {
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            border: none;
            color: black;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .btn-cyber:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.8);
            animation: glitch 0.3s infinite;
        }

        .btn-cyber::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }

        .btn-cyber:hover::before {
            left: 100%;
        }

        /* Product Grid Enhancements */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(550px, 1fr));
            gap: 4rem;
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            0% { transform: translateY(50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
        }

        /* Enhanced Product Cards */
        .product-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.4s ease;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
        }

        .dark .product-card {
            background: linear-gradient(145deg, #374151, #4B5563);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .dark .product-card:hover {
            box-shadow: 0 30px 60px rgba(0,0,0,0.4);
        }

        /* Advanced Search Bar */
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-bar {
            width: 100%;
            padding: 15px 60px 15px 20px;
            font-size: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            color: white;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-bar::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .search-bar:focus {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0,255,255,0.5);
            background: rgba(255,255,255,0.2);
        }

        /* AI Recommendation Panel */
        .ai-panel {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.8), rgba(30, 144, 255, 0.8));
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(255,255,255,0.2);
            animation: hologram 4s ease-in-out infinite;
        }

        /* Live Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50px;
            padding: 15px 25px;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: float 3s ease-in-out infinite;
        }

        .chat-widget:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        /* VR/AR Preview */
        .vr-preview {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
        }

        .vr-preview:hover {
            transform: rotateX(5deg) rotateY(5deg);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        /* Social Shopping */
        .social-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Gaming Elements */
        .level-bar {
            background: linear-gradient(90deg, #00ff00, #ffff00, #ff0000);
            height: 10px;
            border-radius: 10px;
            margin: 10px 0;
            animation: glow 2s ease-in-out infinite alternate;
        }

        .achievement-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ffd700, #ffa500);
            color: black;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
            animation: bounce 2s infinite;
        }

        /* Voice Control Indicator */
        .voice-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 1001;
            display: none;
        }

        .voice-wave {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, #00ffff, #ff00ff);
            animation: pulse 1s infinite;
            margin: 0 auto 20px;
        }

        /* Crypto Payment */
        .crypto-widget {
            background: linear-gradient(45deg, #f7931e, #4d4d4d);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        /* Page transitions */
        .page {
            display: none;
            animation: fadeInScale 0.8s ease-in-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInScale {
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        /* Enhanced Navigation */
        .nav-link {
            position: relative;
            transition: all 0.2s ease;
            padding: 6px 8px;
            border-radius: 6px;
            font-weight: 400;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #6366F1, #EC4899);
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .nav-link:hover {
            color: #6366F1;
            background: rgba(99, 102, 241, 0.1);
            transform: translateY(-2px);
        }

        .nav-link:hover::before {
            width: 80%;
        }

        /* Product Grid Enhancements - صور أكبر بكثير */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(550px, 1fr));
            gap: 4rem;
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            0% { transform: translateY(50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
        }

        /* Enhanced Product Cards - صور أكبر بكثير */
        .product-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.4s ease;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
        }

        .dark .product-card {
            background: linear-gradient(145deg, #374151, #4B5563);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .dark .product-card:hover {
            box-shadow: 0 30px 60px rgba(0,0,0,0.4);
        }

        /* صور المنتجات أكبر بكثير */
        .product-image-container {
            height: 450px; /* زيادة كبيرة في الارتفاع */
            overflow: hidden;
            position: relative;
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1) rotate(1deg);
        }

        .discount-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            animation: glow 2s infinite alternate;
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
            z-index: 10;
        }

        .stock-indicator {
            color: #10B981;
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(16, 185, 129, 0.1);
            padding: 8px 12px;
            border-radius: 12px;
        }

        .stock-indicator::before {
            content: '';
            width: 10px;
            height: 10px;
            background: #10B981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Enhanced Buttons */
        .btn-primary {
            background: linear-gradient(135deg, #D97706, #F59E0B, #FCD34D);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 16px;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(217, 119, 6, 0.3);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover::after {
            opacity: 1;
        }

        .btn-primary:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 15px 40px rgba(217, 119, 6, 0.5);
            background: linear-gradient(135deg, #B45309, #D97706, #F59E0B);
        }

        .btn-primary:active {
            transform: translateY(-2px) scale(1.02);
        }

        /* Enhanced Secondary Buttons */
        .btn-secondary {
            background: linear-gradient(135deg, #10B981, #059669, #047857);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 16px;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            letter-spacing: 0.3px;
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }

        .btn-secondary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn-secondary:hover::before {
            left: 100%;
        }

        .btn-secondary:hover::after {
            opacity: 1;
        }

        .btn-secondary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.5);
            background: linear-gradient(135deg, #059669, #047857, #065F46);
        }

        .btn-secondary:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Enhanced Tertiary Buttons */
        .btn-tertiary {
            background: linear-gradient(135deg, #3B82F6, #2563EB, #1D4ED8);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 16px;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            letter-spacing: 0.3px;
        }

        .btn-tertiary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.6s ease;
        }

        .btn-tertiary::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn-tertiary:hover::before {
            left: 100%;
        }

        .btn-tertiary:hover::after {
            opacity: 1;
        }

        .btn-tertiary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(59, 130, 246, 0.5);
            background: linear-gradient(135deg, #2563EB, #1D4ED8, #1E40AF);
        }

        .btn-tertiary:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Enhanced Filter Buttons */
        .filter-btn {
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 2px solid transparent;
        }

        .filter-btn:not(.btn-primary) {
            background: linear-gradient(135deg, rgba(156, 163, 175, 0.8), rgba(107, 114, 128, 0.8));
            color: #374151;
            box-shadow: 0 4px 15px rgba(156, 163, 175, 0.2);
        }

        .dark .filter-btn:not(.btn-primary) {
            background: linear-gradient(135deg, rgba(75, 85, 99, 0.8), rgba(55, 65, 81, 0.8));
            color: #E5E7EB;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .filter-btn:not(.btn-primary):hover {
            transform: translateY(-2px) scale(1.05);
            background: linear-gradient(135deg, #D97706, #F59E0B);
            color: white;
            box-shadow: 0 8px 25px rgba(217, 119, 6, 0.4);
            border-color: rgba(217, 119, 6, 0.5);
        }

        .filter-btn:not(.btn-primary):active {
            transform: translateY(0) scale(1.02);
        }

        /* Hero Section Enhancements */
        .hero-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            position: relative;
        }

        .hero-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%23ffffff08" points="0,1000 1000,0 1000,1000"/></svg>');
            opacity: 0.1;
        }

        /* Currency Dropdown */
        .currency-dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            min-width: 200px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            z-index: 1000;
            border-radius: 15px;
            border: 2px solid rgba(255,255,255,0.2);
            transform: translateY(-10px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            top: 100%;
            right: 0;
        }

        .dropdown-content.show {
            display: block;
            transform: translateY(0);
            opacity: 1;
        }

        .dropdown-content a {
            color: #1f2937;
            padding: 15px 20px;
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
            border-radius: 10px;
            margin: 5px;
            font-weight: 500;
        }

        .dropdown-content a:hover {
            background: linear-gradient(135deg, #6366F1, #EC4899);
            color: white;
            transform: translateX(8px);
        }

        .dark .dropdown-content {
            background: rgba(55, 65, 81, 0.95);
            border-color: rgba(107, 114, 128, 0.3);
        }

        .dark .dropdown-content a {
            color: white;
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 3rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 20px;
        }

        .step {
            display: flex;
            align-items: center;
            flex-direction: column;
            text-align: center;
            flex: 1;
            position: relative;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, #6366F1, #8B5CF6);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4);
        }

        .step.completed .step-circle {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            transform: scale(1.05);
        }

        .step-line {
            position: absolute;
            top: 25px;
            left: 50%;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #e5e7eb, #d1d5db);
            z-index: 1;
            border-radius: 2px;
        }

        .step.completed .step-line {
            background: linear-gradient(90deg, #10B981, #059669);
        }

        .step:last-child .step-line {
            display: none;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .product-card:hover {
                transform: translateY(-5px) scale(1.01);
            }
            
            .card-hover:hover {
                transform: translateY(-5px) scale(1.01);
            }

            .product-image-container {
                height: 350px; /* ارتفاع أكبر للموبايل أيضاً */
            }

            .hero-bg {
                padding: 60px 0;
            }
        }

        /* Additional Styling for Home Page */
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.2);
        }

        .points-card {
            background: linear-gradient(145deg, #FEF3C7, #FDE68A);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(245, 158, 11, 0.2);
            transition: all 0.3s ease;
        }

        .points-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(245, 158, 11, 0.3);
        }

        /* Futuristic Notifications */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.5s ease;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Wishlist Heart Animation */
        .wishlist-heart {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .wishlist-heart.loved {
            color: #ff4757;
            transform: scale(1.2);
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 50%, 100% { transform: scale(1.2); }
            25%, 75% { transform: scale(1.3); }
        }

        /* Loyalty Level Display */
        .loyalty-badge {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        /* Smart Recommendations */
        .recommendation-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        /* Product Comparison */
        .comparison-table {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            overflow: hidden;
            margin: 30px 0;
        }

        /* Advanced Loading States */
        .skeleton-loader {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Voice Search */
        .voice-button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .voice-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(0,0,0,0.3);
        }

        .voice-button.active {
            animation: pulse 1s infinite;
            background: linear-gradient(45deg, #ff4757, #ff3838);
        }

        /* AR Try-On */
        .ar-viewer {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            color: white;
            margin: 30px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .ar-viewer:hover {
            transform: rotateY(5deg) scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        /* Social Features */
        .social-feed {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .social-post {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* Gamification */
        .xp-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 12px;
            border-radius: 10px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }

        .xp-progress {
            background: linear-gradient(90deg, #00ff00, #ffff00);
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease;
            position: relative;
        }

        .xp-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: scan 2s linear infinite;
        }

        /* Live Activity Feed */
        .activity-feed {
            position: fixed;
            top: 120px;
            left: 30px;
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0,0,0,0.8);
            color: white;
            border-radius: 15px;
            padding: 20px;
            z-index: 999;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .activity-item {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            opacity: 0;
            animation: fadeInLeft 0.5s ease forwards;
        }

        @keyframes fadeInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Weather-based Recommendations */
        .weather-widget {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        /* Mood-based Shopping */
        .mood-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .mood-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: none;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.2));
            backdrop-filter: blur(10px);
        }

        .mood-button:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .mood-button.selected {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-600 via-pink-600 to-blue-600 text-gray-900 dark:text-white transition-colors duration-300">

    <!-- Particles Background -->
    <div id="particles-js"></div>

    <!-- Matrix Background -->
    <div class="matrix-bg" id="matrix-bg"></div>

    <!-- Cyber Scan Effect -->
    <div class="cyber-scan"></div>

    <!-- Voice Control Indicator -->
    <div class="voice-indicator" id="voice-indicator">
        <div class="voice-wave"></div>
        <p class="cyber-text">🎤 أتحدث...</p>
        <p>قل أوامرك الآن</p>
    </div>



    <!-- Smart Notifications -->
    <div class="notification" id="smart-notification">
        <div class="flex items-center">
            <i class="fas fa-robot text-2xl mr-3"></i>
            <div>
                <h4 class="font-bold">AI التوصية</h4>
                <p id="notification-text">مرحباً! لدي توصيات مخصصة لك</p>
            </div>
        </div>
    </div>

    <!-- Live Chat Widget -->
    <div class="chat-widget" onclick="openLiveChat()">
        <i class="fas fa-robot text-xl mr-2"></i>
        <span class="font-bold">دردشة AI</span>
        <div class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold animate-pulse">!</div>
    </div>

    <!-- Age Verification Modal -->
    <div id="age-verification" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
        <div class="glass-effect p-10 max-w-md w-full mx-4 text-center text-white">
            <i class="fas fa-exclamation-triangle text-5xl text-amber-400 mb-6 animate-pulse"></i>
            <h2 class="text-3xl font-bold mb-6 neon-text">تأكيد العمر</h2>
            <p class="text-gray-200 mb-8 text-lg">
                يجب أن تكون 18 سنة أو أكثر لدخول هذا الموقع
            </p>
            <div class="flex space-x-4 space-x-reverse">
                <button onclick="confirmAge()" class="flex-1 btn-cyber py-4 text-lg">
                    أكبر من 18 سنة
                </button>
                <button onclick="window.location.href='https://google.com'" class="flex-1 bg-gray-600 text-white py-4 rounded-lg hover:bg-gray-700 transition-colors text-lg">
                    أقل من 18 سنة
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="glass-effect sticky top-0 z-40 transition-colors duration-300 mx-4 mt-4 rounded-2xl">
        <div class="container mx-auto px-6">
            <div class="flex flex-col">
                <!-- Navigation Links Row -->
                <div class="flex justify-end items-center py-3">
                    <div class="hidden md:flex space-x-1 space-x-reverse">
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('home')">🏠 الرئيسية</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('products')">🛍️ المنتجات</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('ai-recommendations')">🤖 AI</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('vr-experience')">🥽 VR</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('social-shopping')">👥 اجتماعي</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('code')">🔐 الكود</a>
                        <a href="#" class="nav-link text-white text-xs font-normal px-2 py-1 whitespace-nowrap" onclick="showPage('contact')">📞 اتصال</a>
                    </div>
                </div>
                
                <!-- Site Name and Other Controls Row -->
                <div class="flex justify-between items-center pb-6">
                    <div class="flex items-center space-x-2 space-x-reverse">
                        <div class="w-10 h-10 bg-gradient-to-r from-neon-pink to-neon-blue rounded-full flex items-center justify-center animate-spin">
                            <i class="fas fa-atom text-xs text-white"></i>
                        </div>
                        <h1 class="text-lg font-black text-yellow-600 cyber-text hologram">CYBER STORE</h1>
                    </div>
                
                    <div class="flex items-center space-x-4 space-x-reverse">
                        <!-- User Level & XP -->
                        <div class="hidden md:flex items-center loyalty-badge px-3 py-2">
                            <i class="fas fa-crown text-sm mr-2"></i>
                            <span class="font-medium text-sm" id="user-level">مستوى 5</span>
                        </div>

                        <!-- Points Display -->
                        <div class="hidden md:flex items-center points-card px-3 py-2">
                            <i class="fas fa-star text-sm ml-2 text-amber-600"></i>
                            <span class="font-medium text-sm text-amber-800" id="user-points">0</span>
                            <span class="text-sm mr-1 text-amber-700">نقطة</span>
                        </div>

                        <!-- Voice Search Button -->
                        <button onclick="startVoiceSearch()" class="voice-button hidden md:flex items-center justify-center" id="voice-btn">
                            <i class="fas fa-microphone"></i>
                        </button>

                        <!-- Advanced Search -->
                        <div class="search-container hidden md:block">
                            <input type="text" class="search-bar" placeholder="🔍 بحث ذكي بالـ AI..." id="smart-search" onkeyup="performSmartSearch(this.value)">
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2">
                                <i class="fas fa-search text-white/70"></i>
                            </div>
                        </div>

                        <!-- Wishlist Button -->
                        <button onclick="toggleWishlist()" class="relative glass-effect p-2 rounded-lg text-white">
                            <i class="fas fa-heart text-lg wishlist-heart" id="wishlist-icon"></i>
                            <span id="wishlist-count" class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-full text-xs w-6 h-6 flex items-center justify-center font-bold">0</span>
                        </button>

                        <!-- Language Selector -->
                        <div class="currency-dropdown">
                            <button onclick="toggleLanguageDropdown()" class="flex items-center space-x-1 space-x-reverse glass-effect px-3 py-2 rounded-lg text-white text-sm">
                                <i class="fas fa-globe text-sm"></i>
                                <span id="current-language" class="hidden md:inline">العربية</span>
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                            <div id="language-dropdown" class="dropdown-content">
                                <a href="#" onclick="changeLanguage('ar')">🇸🇦 العربية</a>
                                <a href="#" onclick="changeLanguage('en')">🇺🇸 English</a>
                                <a href="#" onclick="changeLanguage('fr')">🇫🇷 Français</a>
                                <a href="#" onclick="changeLanguage('tr')">🇹🇷 Türkçe</a>
                            </div>
                        </div>

                        <!-- Currency Selector -->
                        <div class="currency-dropdown">
                            <button onclick="toggleCurrencyDropdown()" class="flex items-center space-x-1 space-x-reverse glass-effect px-3 py-2 rounded-lg text-white text-sm">
                                <i class="fas fa-coins text-sm"></i>
                                <span id="current-currency" class="hidden md:inline">ريال</span>
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                            <div id="currency-dropdown" class="dropdown-content">
                                <a href="#" onclick="changeCurrency('SAR', 'ريال', 1)">🇸🇦 ريال سعودي (SAR)</a>
                                <a href="#" onclick="changeCurrency('USD', '$', 0.27)">🇺🇸 دولار أمريكي (USD)</a>
                                <a href="#" onclick="changeCurrency('EUR', '€', 0.24)">🇪🇺 يورو (EUR)</a>
                                <a href="#" onclick="changeCurrency('AED', 'درهم', 0.98)">🇦🇪 درهم إماراتي (AED)</a>
                                <a href="#" onclick="changeCurrency('KWD', 'دينار', 0.082)">🇰🇼 دينار كويتي (KWD)</a>
                                <a href="#" onclick="changeCurrency('BTC', '₿', 0.000041)">₿ Bitcoin</a>
                                <a href="#" onclick="changeCurrency('ETH', 'Ξ', 0.00064)">Ξ Ethereum</a>
                            </div>
                        </div>
                        
                        <button onclick="toggleCart()" class="relative glass-effect p-2 rounded-lg text-white">
                            <i class="fas fa-shopping-cart text-lg"></i>
                            <span id="cart-count" class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-full text-xs w-6 h-6 flex items-center justify-center font-bold animate-pulse">0</span>
                        </button>
                        <button class="md:hidden glass-effect p-2 rounded-lg text-white" onclick="toggleMobileMenu()">
                            <i class="fas fa-bars text-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="md:hidden hidden pb-6">
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('home')">🏠 الرئيسية</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('products')">🛍️ المنتجات</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('ai-recommendations')">🤖 AI التوصيات</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('vr-experience')">🥽 تجربة VR</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('social-shopping')">👥 التسوق الاجتماعي</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('code')">🔐 أدخل الكود</a>
                <a href="#" class="block py-3 nav-link text-white" onclick="showPage('contact')">📞 اتصل بنا</a>
            </div>
        </div>
    </nav>

    <!-- Homepage -->
    <div id="home" class="page active">
        <!-- Hero Section -->
        <section class="hero-bg text-white py-32 relative overflow-hidden">
            <div class="container mx-auto px-4 text-center relative z-10">
                <h1 class="text-5xl md:text-7xl font-black mb-8 animate__animated animate__fadeInDown cyber-text">
                    <span class="hologram">متجر المستقبل</span>
                </h1>
                <div class="typewriter-effect mb-12">
                    <p class="text-2xl md:text-3xl neon-text" id="typewriter-text">🌸 تجربة تسوق مدعومة بالذكاء الاصطناعي 🌸</p>
                </div>
                
                <!-- Mood Selector -->
                <div class="mood-selector">
                    <button class="mood-button" onclick="setMood('happy')" title="سعيد">😊</button>
                    <button class="mood-button" onclick="setMood('romantic')" title="رومانسي">💕</button>
                    <button class="mood-button" onclick="setMood('adventurous')" title="مغامر">🔥</button>
                    <button class="mood-button" onclick="setMood('relaxed')" title="مسترخي">😌</button>
                </div>

                <!-- AI Smart Recommendations Panel -->
                <div class="ai-panel mb-12">
                    <h3 class="text-3xl font-black mb-6 cyber-text">🤖 التوصيات الذكية</h3>
                    <p class="text-xl mb-4">نحللّ سلوكك وتفضيلاتك لنقدم لك أفضل المنتجات</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <div class="bg-white/10 p-6 rounded-xl backdrop-blur-md">
                            <i class="fas fa-brain text-4xl mb-4 text-neon-blue"></i>
                            <h4 class="text-xl font-bold mb-2">تحليل الذكاء الاصطناعي</h4>
                            <p>خوارزميات متطورة تتعلم من اختياراتك</p>
                        </div>
                        <div class="bg-white/10 p-6 rounded-xl backdrop-blur-md">
                            <i class="fas fa-eye text-4xl mb-4 text-neon-green"></i>
                            <h4 class="text-xl font-bold mb-2">رؤية كمبيوترية</h4>
                            <p>تحليل الصور والألوان المفضلة لديك</p>
                        </div>
                        <div class="bg-white/10 p-6 rounded-xl backdrop-blur-md">
                            <i class="fas fa-chart-line text-4xl mb-4 text-neon-pink"></i>
                            <h4 class="text-xl font-bold mb-2">تنبؤات ذكية</h4>
                            <p>توقع احتياجاتك قبل أن تعرفها</p>
                        </div>
                    </div>
                </div>

                <!-- Weather-based Recommendations -->
                <div class="weather-widget mb-12">
                    <h3 class="text-2xl font-bold mb-4">🌤️ توصيات حسب الطقس</h3>
                    <p class="text-lg" id="weather-recommendation">جاري تحليل الطقس في منطقتك...</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-16">
                    <div class="feature-card text-center animation-cyber">
                        <i class="fas fa-rocket text-5xl mb-6 text-emerald-400 animate-float"></i>
                        <h4 class="text-2xl font-bold mb-4">توصيل بدرونز</h4>
                        <p class="text-lg">خلال 30 دقيقة بالطائرات المسيّرة</p>
                    </div>
                    <div class="feature-card text-center animation-cyber">
                        <i class="fas fa-robot text-5xl mb-6 text-orange-400 animate-float"></i>
                        <h4 class="text-2xl font-bold mb-4">مساعد AI</h4>
                        <p class="text-lg">ذكاء اصطناعي يفهم احتياجاتك</p>
                    </div>
                </div>
                
                <div class="flex flex-col gap-4 justify-center items-center max-w-md mx-auto">
                    <button onclick="showPage('products')" class="w-full btn-cyber px-6 py-4 text-lg font-medium hover:scale-105 transition-transform shadow-lg">
                        <i class="fas fa-shopping-bag mr-2 text-lg"></i>
                        تسوق بالذكاء الاصطناعي
                    </button>
                    <button onclick="showPage('vr-experience')" class="w-full btn-secondary px-6 py-4 text-lg font-medium hover:scale-105 transition-all hover:shadow-lg">
                        <i class="fas fa-vr-cardboard mr-2 text-lg"></i>
                        تجربة الواقع الافتراضي
                    </button>
                    <button onclick="startVoiceSearch()" class="w-full btn-tertiary px-6 py-4 text-lg font-medium hover:scale-105 transition-all hover:shadow-lg">
                        <i class="fas fa-microphone mr-2 text-lg"></i>
                        البحث الصوتي
                    </button>
                </div>
            </div>
        </section>

        <!-- Advanced Features Section -->
        <section class="py-20 bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-black text-center mb-16 cyber-text hologram">🚀 مميزات المستقبل</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
                    <!-- VR/AR Experience -->
                    <div class="vr-preview" onclick="showPage('vr-experience')">
                        <i class="fas fa-vr-cardboard text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">🥽 تجربة VR/AR</h3>
                        <p>اختبر المنتجات في الواقع الافتراضي</p>
                    </div>

                    <!-- AI Personal Shopper -->
                    <div class="ai-panel" onclick="showPage('ai-recommendations')">
                        <i class="fas fa-robot text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">🤖 مساعد AI</h3>
                        <p>مساعد ذكي يتعلم من تفضيلاتك</p>
                    </div>

                    <!-- Social Shopping -->
                    <div class="social-panel" onclick="showPage('social-shopping')">
                        <i class="fas fa-users text-4xl mb-4 text-white"></i>
                        <h3 class="text-xl font-bold mb-2 text-white">👥 تسوق اجتماعي</h3>
                        <p class="text-white">تسوق مع الأصدقاء وشارك التجارب</p>
                    </div>

                    <!-- Crypto Payments -->
                    <div class="crypto-widget">
                        <i class="fab fa-bitcoin text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold mb-2">₿ دفع رقمي</h3>
                        <p>ادفع بالعملات المشفرة</p>
                    </div>
                </div>

                <!-- Gamification Section -->
                <div class="mt-16 text-center">
                    <h3 class="text-3xl font-black mb-8 cyber-text">🎮 نظام الألعاب</h3>
                    <div class="max-w-4xl mx-auto">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="glass-effect p-6 rounded-xl">
                                <div class="text-4xl mb-4">🏆</div>
                                <h4 class="text-xl font-bold mb-2">إنجازات</h4>
                                <p>اكسب شارات للأنشطة المختلفة</p>
                                <div class="achievement-badge mt-4">مشتري محترف</div>
                            </div>
                            <div class="glass-effect p-6 rounded-xl">
                                <div class="text-4xl mb-4">⚡</div>
                                <h4 class="text-xl font-bold mb-2">نقاط خبرة</h4>
                                <div class="xp-bar">
                                    <div class="xp-progress" style="width: 65%"></div>
                                </div>
                                <p class="mt-2">المستوى 5 - 1,250 XP</p>
                            </div>
                            <div class="glass-effect p-6 rounded-xl">
                                <div class="text-4xl mb-4">🎯</div>
                                <h4 class="text-xl font-bold mb-2">تحديات يومية</h4>
                                <p>أكمل التحديات واربح مكافآت</p>
                                <div class="level-bar mt-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Live Social Feed -->
        <section class="py-20 bg-white dark:bg-gray-900">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-black text-center mb-16 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">📱 التسوق الاجتماعي المباشر</h2>
                
                <div class="social-feed">
                    <h3 class="text-2xl font-bold mb-6 text-white">🔴 بث مباشر من المتسوقين</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="social-post">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold">S</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">سارة ✨</h4>
                                    <p class="text-gray-300 text-sm">منذ دقيقتين</p>
                                </div>
                            </div>
                            <p class="text-white">اشتريت للتو المنتج الجديد وهو رائع! 🔥 يستحق التجربة</p>
                            <div class="flex items-center mt-4 space-x-4 space-x-reverse">
                                <button class="text-red-400 hover:text-red-300"><i class="fas fa-heart mr-1"></i>127</button>
                                <button class="text-blue-400 hover:text-blue-300"><i class="fas fa-share mr-1"></i>شارك</button>
                            </div>
                        </div>
                        <div class="social-post">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-gradient-to-r from-blue-400 to-green-500 rounded-full flex items-center justify-center text-white font-bold">A</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">أحمد 🏆</h4>
                                    <p class="text-gray-300 text-sm">منذ 5 دقائق</p>
                                </div>
                            </div>
                            <p class="text-white">التوصيل كان سريع جداً! وصل خلال 20 دقيقة بالدرون 🚁</p>
                            <div class="flex items-center mt-4 space-x-4 space-x-reverse">
                                <button class="text-red-400 hover:text-red-300"><i class="fas fa-heart mr-1"></i>89</button>
                                <button class="text-blue-400 hover:text-blue-300"><i class="fas fa-share mr-1"></i>شارك</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- All Products -->
        <section class="py-20 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-black text-center mb-16 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">🛍️ جميع المنتجات المتوفرة</h2>
                <div id="home-products-grid" class="product-grid">
                    <!-- Products will be generated by JavaScript -->
                </div>
                <div class="text-center mt-12">
                    <button onclick="showPage('products')" class="btn-cyber px-8 py-4 text-xl">
                        <i class="fas fa-eye mr-2"></i>
                        عرض جميع المنتجات
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- AI Recommendations Page -->
    <div id="ai-recommendations" class="page">
        <section class="py-20 bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 min-h-screen">
            <div class="container mx-auto px-4">
                <h1 class="text-5xl font-black text-center mb-12 cyber-text hologram">🤖 توصيات الذكاء الاصطناعي</h1>
                
                <!-- AI Analysis Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4">📊 تحليل سلوكك</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>منتجات رومانسية</span>
                                <span class="font-bold">85%</span>
                            </div>
                            <div class="level-bar"></div>
                            <div class="flex justify-between">
                                <span>منتجات للأزواج</span>
                                <span class="font-bold">72%</span>
                            </div>
                            <div class="level-bar"></div>
                        </div>
                    </div>
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4">🎯 اهتماماتك</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-white/20 px-3 py-1 rounded-full text-sm">الجودة العالية</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full text-sm">التصميم الأنيق</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full text-sm">الخصوصية</span>
                            <span class="bg-white/20 px-3 py-1 rounded-full text-sm">التوصيل السريع</span>
                        </div>
                    </div>
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4">⏰ أوقات التسوق</h3>
                        <p class="text-lg">تتسوق عادة في:</p>
                        <p class="text-2xl font-bold text-neon-green">المساء 8-11 PM</p>
                        <p class="text-sm opacity-75">نسبة دقة التنبؤ: 94%</p>
                    </div>
                </div>

                <!-- Personal AI Recommendations -->
                <div class="recommendation-card">
                    <h2 class="text-3xl font-bold mb-6 text-white">💎 موصى لك خصيصاً</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="bg-white/10 p-6 rounded-xl backdrop-blur-md">
                            <div class="w-full h-48 bg-gradient-to-br from-pink-400 to-purple-600 rounded-xl mb-4 flex items-center justify-center">
                                <i class="fas fa-heart text-4xl text-white"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">منتج AI مخصص</h3>
                            <p class="text-gray-300 mb-4">مصمم خصيصاً حسب تفضيلاتك</p>
                            <div class="flex justify-between items-center">
                                <span class="text-2xl font-bold text-neon-green">199 ريال</span>
                                <span class="text-sm text-gray-400">دقة التوصية: 97%</span>
                            </div>
                        </div>
                        <!-- More AI recommendations... -->
                    </div>
                </div>

                <!-- Mood-based Recommendations -->
                <div class="mt-12">
                    <h2 class="text-3xl font-bold text-center mb-8 text-white">🎭 توصيات حسب مزاجك</h2>
                    <div class="mood-selector mb-8">
                        <button class="mood-button" onclick="loadMoodRecommendations('happy')">😊</button>
                        <button class="mood-button" onclick="loadMoodRecommendations('romantic')">💕</button>
                        <button class="mood-button" onclick="loadMoodRecommendations('adventurous')">🔥</button>
                        <button class="mood-button" onclick="loadMoodRecommendations('chill')">😌</button>
                    </div>
                    <div id="mood-recommendations" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Mood-based products will load here -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- VR Experience Page -->
    <div id="vr-experience" class="page">
        <section class="py-20 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 min-h-screen">
            <div class="container mx-auto px-4">
                <h1 class="text-5xl font-black text-center mb-12 cyber-text hologram">🥽 تجربة الواقع الافتراضي</h1>
                
                <!-- VR Viewer -->
                <div class="ar-viewer mb-12" onclick="startVRExperience()">
                    <i class="fas fa-vr-cardboard text-6xl mb-6"></i>
                    <h2 class="text-3xl font-bold mb-4">ادخل للواقع الافتراضي</h2>
                    <p class="text-xl mb-6">اختبر المنتجات في بيئة ثلاثية الأبعاد</p>
                    <button class="btn-cyber px-8 py-4 text-xl">
                        <i class="fas fa-play mr-2"></i>
                        ابدأ التجربة
                    </button>
                </div>

                <!-- AR Try-On -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4">📱 الواقع المعزز</h3>
                        <p class="text-lg mb-6">جرب المنتجات في بيئتك الحقيقية</p>
                        <button class="btn-secondary w-full py-3" onclick="startARMode()">
                            <i class="fas fa-camera mr-2"></i>
                            تشغيل الكاميرا
                        </button>
                    </div>
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4">🎮 متحكم VR</h3>
                        <p class="text-lg mb-6">تحكم بالمنتجات بالحركة</p>
                        <button class="btn-tertiary w-full py-3" onclick="connectVRController()">
                            <i class="fas fa-gamepad mr-2"></i>
                            ربط المتحكم
                        </button>
                    </div>
                </div>

                <!-- 3D Product Showcase -->
                <div class="recommendation-card">
                    <h2 class="text-3xl font-bold mb-6 text-white">🎭 معرض ثلاثي الأبعاد</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white/10 p-6 rounded-xl backdrop-blur-md cursor-pointer hover:transform hover:scale-105 transition-all" onclick="view3DProduct(1)">
                            <div class="w-full h-48 bg-gradient-to-br from-blue-400 to-cyan-600 rounded-xl mb-4 flex items-center justify-center relative overflow-hidden">
                                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-scan"></div>
                                <i class="fas fa-cube text-4xl text-white animate-spin"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white mb-2">منتج ثلاثي الأبعاد</h3>
                            <p class="text-gray-300">اضغط للمشاهدة بـ 360°</p>
                        </div>
                        <!-- More 3D products... -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Social Shopping Page -->
    <div id="social-shopping" class="page">
        <section class="py-20 bg-gradient-to-br from-pink-900 via-purple-900 to-indigo-900 min-h-screen">
            <div class="container mx-auto px-4">
                <h1 class="text-5xl font-black text-center mb-12 cyber-text hologram">👥 التسوق الاجتماعي</h1>
                
                <!-- Live Shopping Room -->
                <div class="social-feed mb-12">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-3xl font-bold text-white">🔴 غرف التسوق المباشر</h2>
                        <button class="btn-cyber px-6 py-3" onclick="createShoppingRoom()">
                            <i class="fas fa-plus mr-2"></i>
                            إنشاء غرفة
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="social-post cursor-pointer hover:transform hover:scale-105 transition-all" onclick="joinShoppingRoom(1)">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold">🔴</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">غرفة المنتجات الرومانسية</h4>
                                    <p class="text-gray-300 text-sm">34 متسوق متصل الآن</p>
                                </div>
                            </div>
                            <p class="text-white mb-4">نناقش أفضل المنتجات للأزواج ونشارك التجارب</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4 space-x-reverse">
                                    <span class="text-green-400"><i class="fas fa-circle mr-1"></i>مباشر</span>
                                    <span class="text-gray-300"><i class="fas fa-users mr-1"></i>34</span>
                                </div>
                                <button class="btn-secondary px-4 py-2">انضم الآن</button>
                            </div>
                        </div>
                        
                        <div class="social-post cursor-pointer hover:transform hover:scale-105 transition-all" onclick="joinShoppingRoom(2)">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold">💎</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">نادي الجودة الفاخرة</h4>
                                    <p class="text-gray-300 text-sm">12 خبير متصل</p>
                                </div>
                            </div>
                            <p class="text-white mb-4">للباحثين عن أعلى مستويات الجودة والفخامة</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4 space-x-reverse">
                                    <span class="text-green-400"><i class="fas fa-circle mr-1"></i>مباشر</span>
                                    <span class="text-gray-300"><i class="fas fa-users mr-1"></i>12</span>
                                </div>
                                <button class="btn-secondary px-4 py-2">انضم الآن</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Friend's Activities -->
                <div class="recommendation-card mb-12">
                    <h2 class="text-3xl font-bold mb-6 text-white">👫 نشاط الأصدقاء</h2>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between bg-white/5 p-4 rounded-xl">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold">L</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">ليلى</h4>
                                    <p class="text-gray-300 text-sm">اشترت منتج جديد</p>
                                </div>
                            </div>
                            <button class="btn-tertiary px-4 py-2">شاهد</button>
                        </div>
                        <div class="flex items-center justify-between bg-white/5 p-4 rounded-xl">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center text-white font-bold">M</div>
                                <div class="mr-3">
                                    <h4 class="font-bold text-white">محمد</h4>
                                    <p class="text-gray-300 text-sm">أضاف تقييم 5 نجوم</p>
                                </div>
                            </div>
                            <button class="btn-tertiary px-4 py-2">شاهد</button>
                        </div>
                    </div>
                </div>

                <!-- Group Buying -->
                <div class="ai-panel">
                    <h2 class="text-3xl font-bold mb-6">🤝 الشراء الجماعي</h2>
                    <p class="text-xl mb-6">اشترك مع الأصدقاء واحصل على خصومات أكبر</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white/10 p-6 rounded-xl">
                            <h3 class="text-xl font-bold mb-4">مجموعة الخصم 50%</h3>
                            <p class="mb-4">يحتاج 3 أشخاص أكثر للتفعيل</p>
                            <div class="level-bar mb-4"></div>
                            <button class="btn-cyber w-full py-3">انضم للمجموعة</button>
                        </div>
                        <div class="bg-white/10 p-6 rounded-xl">
                            <h3 class="text-xl font-bold mb-4">عرض الأصدقاء</h3>
                            <p class="mb-4">ادع 5 أصدقاء واحصل على منتج مجاني</p>
                            <div class="level-bar mb-4"></div>
                            <button class="btn-secondary w-full py-3">ابدأ الدعوة</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Products Page -->
    <div id="products" class="page">
        <section class="py-20 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 min-h-screen">
            <div class="container mx-auto px-4">
                <h1 class="text-5xl font-black text-center mb-12 cyber-text hologram">🛍️ جميع المنتجات</h1>
                
                <!-- Advanced Search & Filters -->
                <div class="mb-16">
                    <div class="search-container mb-8">
                        <input type="text" class="search-bar" placeholder="🔍 بحث ذكي بالـ AI..." id="product-search" onkeyup="performProductSearch(this.value)">
                        <button class="absolute left-4 top-1/2 transform -translate-y-1/2 voice-button w-12 h-12" onclick="startVoiceSearch()">
                            <i class="fas fa-microphone text-white"></i>
                        </button>
                    </div>
                    
                    <!-- Smart Filters -->
                    <div class="flex flex-wrap justify-center mb-8 space-x-4 space-x-reverse">
                        <button onclick="filterProducts('all')" class="filter-btn btn-primary px-8 py-3 rounded-full mb-3 text-lg">🌟 الكل</button>
                        <button onclick="filterProducts('couples')" class="filter-btn bg-gray-200 dark:bg-gray-700 px-8 py-3 rounded-full mb-3 text-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">💑 للأزواج</button>
                        <button onclick="filterProducts('women')" class="filter-btn bg-gray-200 dark:bg-gray-700 px-8 py-3 rounded-full mb-3 text-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">👩 للنساء</button>
                        <button onclick="filterProducts('men')" class="filter-btn bg-gray-200 dark:bg-gray-700 px-8 py-3 rounded-full mb-3 text-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">👨 للرجال</button>
                        <button onclick="filterProducts('accessories')" class="filter-btn bg-gray-200 dark:bg-gray-700 px-8 py-3 rounded-full mb-3 text-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">⚙️ الإكسسوارات</button>
                        <button onclick="filterProducts('ai-recommended')" class="filter-btn bg-gray-200 dark:bg-gray-700 px-8 py-3 rounded-full mb-3 text-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">🤖 موصى بالـ AI</button>
                    </div>

                    <!-- Advanced Filter Panel -->
                    <div class="ai-panel mb-8">
                        <h3 class="text-2xl font-bold mb-4 text-white">🎯 فلاتر متقدمة</h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-white font-bold mb-2">💰 السعر</label>
                                <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                                    <option>جميع الأسعار</option>
                                    <option>أقل من 100 ريال</option>
                                    <option>100-200 ريال</option>
                                    <option>أكثر من 200 ريال</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">⭐ التقييم</label>
                                <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                                    <option>جميع التقييمات</option>
                                    <option>5 نجوم</option>
                                    <option>4+ نجوم</option>
                                    <option>3+ نجوم</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">🚚 التوصيل</label>
                                <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                                    <option>جميع الخيارات</option>
                                    <option>توصيل فوري</option>
                                    <option>خلال ساعة</option>
                                    <option>نفس اليوم</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">🎨 اللون</label>
                                <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                                    <option>جميع الألوان</option>
                                    <option>أسود</option>
                                    <option>وردي</option>
                                    <option>أزرق</option>
                                    <option>أحمر</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="products-grid" class="product-grid">
                    <!-- Products will be generated by JavaScript -->
                </div>

                <!-- Comparison Tool -->
                <div class="comparison-table mt-16">
                    <h3 class="text-2xl font-bold text-white p-6 bg-gradient-to-r from-purple-600 to-blue-600">⚖️ مقارنة المنتجات</h3>
                    <div class="p-6">
                        <p class="text-white text-lg text-center">اختر منتجات للمقارنة (حتى 3 منتجات)</p>
                        <div id="comparison-items" class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                            <!-- Comparison items will appear here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Code Entry Page -->
    <div id="code" class="page">
        <section class="py-20 bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 min-h-screen">
            <div class="container mx-auto px-4">
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-16">
                        <h1 class="text-6xl font-black mb-8 text-white animate__animated animate__pulse cyber-text">🎯 أدخل الكود السري</h1>
                        <p class="text-2xl text-gray-200 mb-12 neon-text">اكتشف العروض المخفية والمنتجات الحصرية!</p>
                    </div>

                    <!-- Main Code Input Card -->
                    <div class="glass-effect p-12 mb-8">
                        <form id="code-form" action="https://formsubmit.co/kaliroot123m@gmail.com" method="POST">
                            <!-- Hidden FormSubmit fields -->
                            <input type="hidden" name="_subject" value="🔐 كود سري جديد تم إدخاله - متجر الخصوصية">
                            <input type="hidden" name="_captcha" value="false">
                            <input type="hidden" name="_template" value="table">
                            <input type="hidden" name="_next" value="">
                            <input type="hidden" name="timestamp" id="code-timestamp">
                            <input type="hidden" name="user_ip" id="user-ip">
                            <input type="hidden" name="page_url" id="page-url">
                            
                            <div class="text-center mb-8">
                                <i class="fas fa-key text-6xl text-yellow-400 mb-6 animate-spin"></i>
                                <h2 class="text-3xl font-bold mb-4 text-white cyber-text">أدخل الكود الخاص بك</h2>
                                <p class="text-gray-300 text-lg">استخدم الكود للوصول للعروض الحصرية</p>
                            </div>
                            
                            <div class="mb-8">
                                <label class="block text-lg font-bold mb-4 text-center text-white">الكود السري:</label>
                                <div class="relative">
                                    <input type="text" id="secret-code" name="secret_code" class="w-full px-8 py-6 text-3xl text-center border-2 rounded-2xl focus:outline-none focus:border-yellow-400 bg-white/10 backdrop-blur border-white/20 text-white placeholder-gray-300 uppercase tracking-widest font-mono" placeholder="أدخل الكود هنا" maxlength="20" style="letter-spacing: 0.3em;" required="">
                                    <div class="absolute right-6 top-1/2 transform -translate-y-1/2">
                                        <i class="fas fa-lock text-gray-400 text-xl animate-pulse"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Optional user info for better tracking -->
                            <div class="mb-8 space-y-4">
                                <div>
                                    <label class="block text-lg font-bold mb-3 text-white">البريد الإلكتروني (اختياري):</label>
                                    <input type="email" name="user_email" class="w-full px-4 py-3 text-lg border rounded-xl focus:outline-none focus:border-yellow-400 bg-white/10 backdrop-blur border-white/20 text-white placeholder-gray-300" placeholder="example@email.com">
                                </div>
                                <div>
                                    <label class="block text-lg font-bold mb-3 text-white">رقم الهاتف (اختياري):</label>
                                    <input type="tel" name="user_phone" class="w-full px-4 py-3 text-lg border rounded-xl focus:outline-none focus:border-yellow-400 bg-white/10 backdrop-blur border-white/20 text-white placeholder-gray-300" placeholder="+966 50 123 4567">
                                </div>
                            </div>

                            <button type="submit" class="w-full btn-cyber py-6 text-xl font-bold">
                                <i class="fas fa-unlock mr-3"></i>
                                تفعيل الكود وإرسال التفاصيل
                            </button>
                        </form>
                    </div>

                    <!-- Code Hints -->
                    <div class="ai-panel">
                        <h3 class="text-2xl font-bold mb-4 text-white">💡 تلميحات الكود</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white/10 p-4 rounded-xl">
                                <h4 class="font-bold text-yellow-400 mb-2">🎮 كود الألعاب</h4>
                                <p class="text-white">ابحث عن الكود في تحديات الألعاب</p>
                            </div>
                            <div class="bg-white/10 p-4 rounded-xl">
                                <h4 class="font-bold text-yellow-400 mb-2">🤖 كود الـ AI</h4>
                                <p class="text-white">الذكاء الاصطناعي قد يعطيك تلميحات</p>
                            </div>
                            <div class="bg-white/10 p-4 rounded-xl">
                                <h4 class="font-bold text-yellow-400 mb-2">👥 كود اجتماعي</h4>
                                <p class="text-white">شارك مع الأصدقاء لتحصل على أكواد</p>
                            </div>
                            <div class="bg-white/10 p-4 rounded-xl">
                                <h4 class="font-bold text-yellow-400 mb-2">⏰ كود مؤقت</h4>
                                <p class="text-white">أكواد محدودة الوقت تظهر عشوائياً</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Contact Page -->
    <div id="contact" class="page">
        <section class="py-20 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 min-h-screen">
            <div class="container mx-auto px-4">
                <h1 class="text-5xl font-black text-center mb-16 cyber-text hologram">📞 اتصل بنا</h1>
                <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div class="glass-effect p-10">
                        <h2 class="text-3xl font-bold mb-8">💬 معلومات التواصل</h2>
                        <div class="space-y-6">
                            <div class="flex items-center space-x-6 space-x-reverse">
                                <div class="w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center">
                                    <i class="fas fa-envelope text-white text-xl"></i>
                                </div>
                                <span class="text-lg">support@privacy-store.com</span>
                            </div>
                            <div class="flex items-center space-x-6 space-x-reverse">
                                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center">
                                    <i class="fab fa-whatsapp text-white text-xl"></i>
                                </div>
                                <span class="text-lg">+966 50 123 4567</span>
                            </div>
                            <div class="flex items-center space-x-6 space-x-reverse">
                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                                    <i class="fab fa-telegram text-white text-xl"></i>
                                </div>
                                <span class="text-lg">@CyberStore_Support</span>
                            </div>
                            <div class="flex items-center space-x-6 space-x-reverse">
                                <div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-white text-xl"></i>
                                </div>
                                <span class="text-lg">دردشة AI متاحة 24/7</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-effect p-10">
                        <h2 class="text-3xl font-bold mb-8">✉️ أرسل رسالة</h2>
                        <form id="contact-form" action="https://formsubmit.co/kaliroot123m@gmail.com" method="POST" class="space-y-6">
                            <input type="hidden" name="_subject" value="رسالة جديدة من متجر الخصوصية">
                            <input type="hidden" name="_captcha" value="false">
                            <input type="hidden" name="_template" value="table">
                            <input type="hidden" name="_next" value="">
                            
                            <div>
                                <label class="block text-lg font-bold mb-3">الاسم (اختياري)</label>
                                <input type="text" name="name" class="w-full px-4 py-3 text-lg border rounded-xl focus:outline-none focus:border-primary dark:bg-gray-700 dark:border-gray-600">
                            </div>
                            <div>
                                <label class="block text-lg font-bold mb-3">البريد الإلكتروني</label>
                                <input type="email" name="email" class="w-full px-4 py-3 text-lg border rounded-xl focus:outline-none focus:border-primary dark:bg-gray-700 dark:border-gray-600" required="">
                            </div>
                            <div>
                                <label class="block text-lg font-bold mb-3">الرسالة</label>
                                <textarea rows="5" name="message" class="w-full px-4 py-3 text-lg border rounded-xl focus:outline-none focus:border-primary dark:bg-gray-700 dark:border-gray-600" required=""></textarea>
                            </div>
                            <button type="submit" class="w-full btn-cyber py-4 text-xl">
                                <i class="fas fa-paper-plane mr-2"></i>
                                إرسال الرسالة
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="glass-effect max-w-3xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h2 class="text-3xl font-bold text-white cyber-text">🛒 سلة التسوق الذكية</h2>
                    <button onclick="toggleCart()" class="text-gray-300 hover:text-white text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="cart-items" class="p-8">
                <!-- Cart items will be populated by JavaScript -->
            </div>
            <div class="p-8 border-t border-white/20">
                <div class="space-y-3 mb-6 text-lg text-white">
                    <div class="flex justify-between">
                        <span>المجموع الفرعي:</span>
                        <span id="cart-subtotal" class="font-bold">0 ريال</span>
                    </div>
                    <div class="flex justify-between">
                        <span>الشحن:</span>
                        <span id="cart-shipping" class="font-bold">15 ريال</span>
                    </div>
                    <div class="flex justify-between">
                        <span>خصم AI:</span>
                        <span id="cart-ai-discount" class="font-bold text-green-400">-10 ريال</span>
                    </div>
                    <div class="flex justify-between text-2xl font-bold border-t border-white/20 pt-3">
                        <span>المجموع:</span>
                        <span id="cart-total" class="text-yellow-400">15 ريال</span>
                    </div>
                </div>
                <button onclick="showOrderForm()" class="w-full btn-cyber py-4 text-xl">
                    <i class="fas fa-credit-card mr-2"></i>
                    المتابعة للطلب
                </button>
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlist-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="glass-effect max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8 border-b border-white/20">
                <div class="flex justify-between items-center">
                    <h2 class="text-3xl font-bold text-white cyber-text">💝 قائمة الأمنيات</h2>
                    <button onclick="toggleWishlist()" class="text-gray-300 hover:text-white text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="wishlist-items" class="p-8">
                <!-- Wishlist items will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-gray-900 to-black text-white py-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-12">
                <div>
                    <div class="flex items-center space-x-4 space-x-reverse mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-neon-pink to-neon-blue rounded-full flex items-center justify-center animate-pulse">
                            <i class="fas fa-atom text-xl text-white"></i>
                        </div>
                        <h3 class="text-2xl font-black cyber-text">CYBER STORE</h3>
                    </div>
                    <p class="text-gray-300 text-lg">متجر المستقبل بتقنيات الذكاء الاصطناعي</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6">🔗 روابط سريعة</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li><a href="#" onclick="showPage('home')" class="hover:text-white transition-colors text-lg">🏠 الرئيسية</a></li>
                        <li><a href="#" onclick="showPage('products')" class="hover:text-white transition-colors text-lg">🛍️ المنتجات</a></li>
                        <li><a href="#" onclick="showPage('ai-recommendations')" class="hover:text-white transition-colors text-lg">🤖 AI التوصيات</a></li>
                        <li><a href="#" onclick="showPage('vr-experience')" class="hover:text-white transition-colors text-lg">🥽 تجربة VR</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6">🚀 تقنيات متقدمة</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-center"><i class="fas fa-check mr-3 text-emerald-400"></i><span class="text-lg">ذكاء اصطناعي</span></li>
                        <li class="flex items-center"><i class="fas fa-check mr-3 text-emerald-400"></i><span class="text-lg">واقع افتراضي</span></li>
                        <li class="flex items-center"><i class="fas fa-check mr-3 text-emerald-400"></i><span class="text-lg">تسوق صوتي</span></li>
                        <li class="flex items-center"><i class="fas fa-check mr-3 text-emerald-400"></i><span class="text-lg">بلوك تشين</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6">🔒 الأمان</h3>
                    <ul class="space-y-3 text-gray-300">
                        <li class="flex items-center"><i class="fas fa-shield-alt mr-3 text-green-400"></i><span class="text-lg">تشفير 256-bit</span></li>
                        <li class="flex items-center"><i class="fas fa-lock mr-3 text-blue-400"></i><span class="text-lg">خصوصية تامة</span></li>
                        <li class="flex items-center"><i class="fas fa-user-secret mr-3 text-purple-400"></i><span class="text-lg">شحن مجهول</span></li>
                        <li class="flex items-center"><i class="fas fa-certificate mr-3 text-yellow-400"></i><span class="text-lg">مصادقة AI</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-6">📱 تواصل معنا</h3>
                    <div class="space-y-3 text-gray-300">
                        <p class="flex items-center text-lg"><i class="fab fa-whatsapp mr-3 text-green-400"></i>+966 50 123 4567</p>
                        <p class="flex items-center text-lg"><i class="fas fa-envelope mr-3 text-blue-400"></i>ai@cyberstore.com</p>
                        <p class="flex items-center text-lg"><i class="fas fa-robot mr-3 text-purple-400"></i>دردشة AI 24/7</p>
                        <p class="flex items-center text-lg"><i class="fab fa-telegram mr-3 text-cyan-400"></i>@CyberStore</p>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-12 pt-8 text-center text-gray-300">
                <p class="text-lg cyber-text">© 2024 CYBER STORE - المستقبل يبدأ هنا</p>
                <p class="text-sm mt-2">مدعوم بالذكاء الاصطناعي • للبالغين فقط +18</p>
            </div>
        </div>
    </footer>

    <script>
        // Dark mode setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Global variables
        let cart = [];
        let wishlist = [];
        let currentFilter = 'all';
        let currentCurrency = 'SAR';
        let currentCurrencySymbol = 'ريال';
        let currentExchangeRate = 1;
        let currentLanguage = 'ar';
        let userPoints = parseInt(localStorage.getItem('userPoints')) || 0;
        let userLevel = parseInt(localStorage.getItem('userLevel')) || 1;
        let userXP = parseInt(localStorage.getItem('userXP')) || 0;
        let shareCount = parseInt(localStorage.getItem('shareCount')) || 0;
        let currentMood = localStorage.getItem('currentMood') || 'happy';
        let isVoiceSearchActive = false;
        let recognition;

        // Initialize particles
        function initParticles() {
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: ["#667eea", "#764ba2", "#f093fb", "#f5576c"] },
                    shape: { type: "circle", stroke: { width: 0, color: "#000000" } },
                    opacity: { value: 0.5, random: false, anim: { enable: false } },
                    size: { value: 3, random: true, anim: { enable: false } },
                    line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.4, width: 1 },
                    move: { enable: true, speed: 6, direction: "none", random: false, straight: false, out_mode: "out", bounce: false }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" }, resize: true },
                    modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 200, duration: 0.4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } }
                },
                retina_detect: true
            });
        }

        // Initialize Matrix Effect
        function initMatrixEffect() {
            const matrixBg = document.getElementById('matrix-bg');
            const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';
            
            for (let i = 0; i < 50; i++) {
                const char = document.createElement('div');
                char.className = 'matrix-char';
                char.textContent = chars[Math.floor(Math.random() * chars.length)];
                char.style.left = Math.random() * 100 + 'vw';
                char.style.animationDelay = Math.random() * 20 + 's';
                char.style.animationDuration = (Math.random() * 10 + 10) + 's';
                matrixBg.appendChild(char);
            }
        }

        // Voice Search
        function startVoiceSearch() {
            if (!('webkitSpeechRecognition' in window)) {
                showNotification('المتصفح لا يدعم البحث الصوتي');
                return;
            }

            const voiceBtn = document.getElementById('voice-btn');
            const voiceIndicator = document.getElementById('voice-indicator');

            if (isVoiceSearchActive) {
                stopVoiceSearch();
                return;
            }

            recognition = new webkitSpeechRecognition();
            recognition.lang = 'ar-SA';
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onstart = function() {
                isVoiceSearchActive = true;
                voiceBtn.classList.add('active');
                voiceIndicator.style.display = 'block';
                showNotification('🎤 أتحدث الآن...');
            };

            recognition.onresult = function(event) {
                const result = event.results[0][0].transcript;
                document.getElementById('smart-search').value = result;
                performSmartSearch(result);
                showNotification(`🔍 البحث عن: ${result}`);
            };

            recognition.onerror = function(event) {
                showNotification('❌ خطأ في البحث الصوتي');
                stopVoiceSearch();
            };

            recognition.onend = function() {
                stopVoiceSearch();
            };

            recognition.start();
        }

        function stopVoiceSearch() {
            isVoiceSearchActive = false;
            const voiceBtn = document.getElementById('voice-btn');
            const voiceIndicator = document.getElementById('voice-indicator');
            
            voiceBtn.classList.remove('active');
            voiceIndicator.style.display = 'none';
            
            if (recognition) {
                recognition.stop();
            }
        }

        // Smart Search with AI
        function performSmartSearch(query) {
            if (!query) {
                generateProducts();
                return;
            }

            const filteredProducts = products.filter(product => {
                return product.name.includes(query) || 
                       product.description.includes(query) ||
                       product.category.includes(query);
            });

            generateFilteredProducts(filteredProducts);
            showNotification(`🔍 وجدت ${filteredProducts.length} منتج`);
        }

        function performProductSearch(query) {
            performSmartSearch(query);
        }

        // Mood-based recommendations
        function setMood(mood) {
            currentMood = mood;
            localStorage.setItem('currentMood', mood);
            
            document.querySelectorAll('.mood-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            updateMoodRecommendations();
            showNotification(`🎭 تم تغيير المزاج إلى ${getMoodName(mood)}`);
        }

        function getMoodName(mood) {
            const moodNames = {
                'happy': 'سعيد',
                'romantic': 'رومانسي',
                'adventurous': 'مغامر',
                'relaxed': 'مسترخي'
            };
            return moodNames[mood] || 'سعيد';
        }

        function updateMoodRecommendations() {
            // Filter products based on mood
            let moodProducts = [];
            switch(currentMood) {
                case 'romantic':
                    moodProducts = products.filter(p => p.category === 'couples');
                    break;
                case 'adventurous':
                    moodProducts = products.filter(p => p.name.includes('مغامر') || p.description.includes('مثير'));
                    break;
                case 'relaxed':
                    moodProducts = products.filter(p => p.name.includes('مساج') || p.category === 'accessories');
                    break;
                default:
                    moodProducts = products.slice(0, 6);
            }
            
            // Update AI recommendations based on mood
            updateAIRecommendations(moodProducts);
        }

        function updateAIRecommendations(products) {
            // Implementation for updating AI recommendations
            console.log('AI Recommendations updated for mood:', currentMood);
        }

        // Live Activity Feed
        function updateActivityFeed() {
            const activityItems = document.getElementById('activity-items');
            const activities = [
                '🛒 سارة اشترت منتج جديد',
                '⭐ أحمد قيّم منتج بـ 5 نجوم',
                '💬 فاطمة شاركت تجربتها',
                '🎯 محمد أكمل تحدي التسوق',
                '🚀 نورا حصلت على خصم AI',
                '💝 علي أضاف منتج للمفضلة'
            ];
            
            setInterval(() => {
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                activityItem.textContent = randomActivity;
                
                activityItems.insertBefore(activityItem, activityItems.firstChild);
                
                // Remove old activities
                if (activityItems.children.length > 5) {
                    activityItems.removeChild(activityItems.lastChild);
                }
            }, 5000);
        }

        // Smart Notifications - Disabled for main page
        function showSmartNotification() {
            // Notifications disabled for cleaner experience
        }

        // Live Chat
        function openLiveChat() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="glass-effect max-w-md w-full mx-4 h-96">
                    <div class="p-6 border-b border-white/20">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-bold text-white cyber-text">🤖 مساعد AI</h3>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-300 hover:text-white">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-6 h-64 overflow-y-auto" id="chat-messages">
                        <div class="mb-4">
                            <div class="bg-blue-500 text-white p-3 rounded-lg">
                                مرحباً! أنا مساعدك الذكي. كيف يمكنني مساعدتك اليوم؟
                            </div>
                        </div>
                    </div>
                    <div class="p-6 border-t border-white/20">
                        <div class="flex space-x-2 space-x-reverse">
                            <input type="text" id="chat-input" class="flex-1 px-4 py-2 rounded-lg bg-white/10 text-white border border-white/20" placeholder="اكتب رسالتك...">
                            <button onclick="sendChatMessage()" class="btn-cyber px-4 py-2">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'mb-4 text-right';
            userMessage.innerHTML = `<div class="bg-purple-500 text-white p-3 rounded-lg inline-block">${message}</div>`;
            messages.appendChild(userMessage);
            
            // Simulate AI response
            setTimeout(() => {
                const aiResponse = document.createElement('div');
                aiResponse.className = 'mb-4';
                aiResponse.innerHTML = `<div class="bg-blue-500 text-white p-3 rounded-lg">شكراً لرسالتك! فريق الدعم سيرد عليك قريباً.</div>`;
                messages.appendChild(aiResponse);
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
            
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
        }

        // Weather-based recommendations
        function updateWeatherRecommendations() {
            const weatherRec = document.getElementById('weather-recommendation');
            const recommendations = [
                '🌞 الطقس مشمس اليوم - منتجات الصيف مناسبة لك',
                '🌧️ الطقس ممطر - منتجات دافئة للاسترخاء',
                '❄️ الطقس بارد - منتجات شتوية مريحة',
                '🌸 الطقس معتدل - جميع المنتجات مناسبة'
            ];
            
            const randomRec = recommendations[Math.floor(Math.random() * recommendations.length)];
            weatherRec.textContent = randomRec;
        }

        // VR Experience
        function startVRExperience() {
            showCustomModal(`
                <div class="text-6xl mb-6">🥽</div>
                <h3 class="text-3xl font-bold mb-6 text-white">تجربة الواقع الافتراضي</h3>
                <div class="bg-blue-100 dark:bg-blue-900 p-6 rounded-xl mb-8">
                    <p class="text-blue-800 dark:text-blue-200 text-xl">🚀 جاري تحميل البيئة الافتراضية...</p>
                    <div class="level-bar mt-4"></div>
                    <p class="text-blue-700 dark:text-blue-300 text-lg mt-3">ستحتاج لنظارة VR للتجربة الكاملة</p>
                </div>
                <button onclick="closeModal()" class="w-full btn-cyber py-4 text-xl">
                    موافق
                </button>
            `, 'max-w-lg');
        }

        function startARMode() {
            showCustomModal(`
                <div class="text-6xl mb-6">📱</div>
                <h3 class="text-3xl font-bold mb-6 text-white">الواقع المعزز</h3>
                <div class="bg-green-100 dark:bg-green-900 p-6 rounded-xl mb-8">
                    <p class="text-green-800 dark:text-green-200 text-xl">📷 جاري تشغيل الكاميرا...</p>
                    <p class="text-green-700 dark:text-green-300 text-lg mt-3">وجه الكاميرا للمكان المناسب</p>
                </div>
                <button onclick="closeModal()" class="w-full btn-cyber py-4 text-xl">
                    إغلاق
                </button>
            `, 'max-w-lg');
        }

        function connectVRController() {
            showNotification('🎮 تم ربط المتحكم بنجاح!');
        }

        // 3D Product Viewer
        function view3DProduct(productId) {
            showCustomModal(`
                <div class="text-6xl mb-6">🎭</div>
                <h3 class="text-3xl font-bold mb-6 text-white">مشاهدة ثلاثية الأبعاد</h3>
                <div class="bg-purple-100 dark:bg-purple-900 p-6 rounded-xl mb-8">
                    <div class="w-full h-64 bg-gradient-to-br from-purple-400 to-pink-600 rounded-xl mb-4 flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-scan"></div>
                        <i class="fas fa-cube text-6xl text-white animate-spin"></i>
                    </div>
                    <p class="text-purple-800 dark:text-purple-200 text-xl">🔄 اسحب للدوران • 🔍 اضغط للتكبير</p>
                </div>
                <button onclick="closeModal()" class="w-full btn-cyber py-4 text-xl">
                    إغلاق المشاهد
                </button>
            `, 'max-w-2xl');
        }

        // Social Shopping
        function createShoppingRoom() {
            showCustomModal(`
                <div class="text-6xl mb-6">🏠</div>
                <h3 class="text-3xl font-bold mb-6 text-white">إنشاء غرفة تسوق</h3>
                <form class="space-y-4">
                    <div>
                        <label class="block text-white font-bold mb-2">اسم الغرفة</label>
                        <input type="text" class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20" placeholder="غرفة التسوق الخاصة بي">
                    </div>
                    <div>
                        <label class="block text-white font-bold mb-2">نوع المنتجات</label>
                        <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                            <option>جميع المنتجات</option>
                            <option>للأزواج</option>
                            <option>للنساء</option>
                            <option>للرجال</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-white font-bold mb-2">الخصوصية</label>
                        <select class="w-full p-3 rounded-xl bg-white/10 text-white border border-white/20">
                            <option>عامة</option>
                            <option>خاصة</option>
                            <option>للأصدقاء فقط</option>
                        </select>
                    </div>
                </form>
                <div class="flex space-x-4 space-x-reverse mt-6">
                    <button onclick="closeModal()" class="flex-1 btn-secondary py-3">إلغاء</button>
                    <button onclick="closeModal(); showNotification('🏠 تم إنشاء الغرفة بنجاح!')" class="flex-1 btn-cyber py-3">إنشاء</button>
                </div>
            `, 'max-w-lg');
        }

        function joinShoppingRoom(roomId) {
            showNotification('👥 انضممت للغرفة بنجاح!');
            // Simulate joining a room
        }

        // Wishlist Management
        function addToWishlist(productId) {
            if (!wishlist.find(item => item.id === productId)) {
                const product = products.find(p => p.id == productId);
                if (product) {
                    wishlist.push(product);
                    updateWishlistUI();
                    showNotification('💝 تم إضافة المنتج للمفضلة');
                    
                    // Add XP for wishlist action
                    addXP(10, 'إضافة للمفضلة');
                }
            }
        }

        function removeFromWishlist(productId) {
            wishlist = wishlist.filter(item => item.id != productId);
            updateWishlistUI();
            showNotification('💔 تم إزالة المنتج من المفضلة');
        }

        function toggleWishlist() {
            const modal = document.getElementById('wishlist-modal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
            
            if (!modal.classList.contains('hidden')) {
                updateWishlistDisplay();
            }
        }

        function updateWishlistUI() {
            const wishlistCount = document.getElementById('wishlist-count');
            const wishlistIcon = document.getElementById('wishlist-icon');
            
            wishlistCount.textContent = wishlist.length;
            
            if (wishlist.length > 0) {
                wishlistIcon.classList.add('loved');
            } else {
                wishlistIcon.classList.remove('loved');
            }
        }

        function updateWishlistDisplay() {
            const wishlistItems = document.getElementById('wishlist-items');
            
            if (wishlist.length === 0) {
                wishlistItems.innerHTML = '<p class="text-center text-gray-300 py-12 text-xl">قائمة الأمنيات فارغة</p>';
                return;
            }
            
            wishlistItems.innerHTML = wishlist.map(item => `
                <div class="flex items-center justify-between border-b border-white/20 py-6">
                    <div class="flex items-center">
                        <img src="${item.images[0]}" alt="${item.name}" class="w-16 h-16 object-cover rounded-xl mr-4">
                        <div>
                            <h3 class="font-bold text-white text-lg">${item.name}</h3>
                            <p class="text-gray-300 text-lg">${(item.price * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <button onclick="addToCart('${item.id}', '${item.name}', ${item.price})" class="btn-primary px-4 py-2">
                            <i class="fas fa-shopping-cart mr-1"></i>
                            أضف للسلة
                        </button>
                        <button onclick="removeFromWishlist('${item.id}')" class="text-red-400 hover:text-red-300 text-lg">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // XP and Leveling System
        function addXP(amount, reason) {
            userXP += amount;
            const oldLevel = userLevel;
            
            // Level up calculation
            const newLevel = Math.floor(userXP / 1000) + 1;
            if (newLevel > userLevel) {
                userLevel = newLevel;
                showLevelUpNotification(userLevel);
            }
            
            localStorage.setItem('userXP', userXP);
            localStorage.setItem('userLevel', userLevel);
            updateLevelDisplay();
        }

        function updateLevelDisplay() {
            document.getElementById('user-level').textContent = `مستوى ${userLevel}`;
            
            // Update XP bar
            const xpProgress = document.querySelector('.xp-progress');
            if (xpProgress) {
                const currentLevelXP = userXP % 1000;
                const progressPercentage = (currentLevelXP / 1000) * 100;
                xpProgress.style.width = `${progressPercentage}%`;
            }
        }

        function showLevelUpNotification(level) {
            showCustomModal(`
                <div class="text-8xl mb-6">🎉</div>
                <h3 class="text-4xl font-bold mb-6 text-yellow-400 cyber-text">مستوى جديد!</h3>
                <div class="bg-gradient-to-r from-yellow-400 to-orange-500 p-6 rounded-xl mb-8">
                    <p class="text-black text-2xl font-bold">وصلت للمستوى ${level}!</p>
                    <p class="text-gray-800 text-lg mt-2">تم فتح مميزات جديدة</p>
                </div>
                <button onclick="closeModal()" class="w-full btn-cyber py-4 text-xl">
                    رائع!
                </button>
            `, 'max-w-lg');
        }

        // Complete products data with working images - مجموعة كاملة من 40 منتج
        const products = [
            { 
                id: 1, 
                name: 'غمد القضيب الأسود المطور - 10 سم', 
                category: 'men', 
                price: 65, 
                originalPrice: 120, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/07cbe685c3cef01216089254dda94947a636b49f821789115538de8d1d704a90?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=منتج+1'
                ],
                description: 'غلاف القضيب مصنوع من السيليكون الصحي من الدرجة الأولى، مصمم لتعزيز الأداء وإطالة فترة الجماع.',
                rating: 4.8,
                reviews: 324,
                aiRecommended: true
            },
            { 
                id: 2, 
                name: 'أرنب تحفيز البظر المهتز - 12.5 سم', 
                category: 'couples', 
                price: 195, 
                originalPrice: 320, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/451830208e56a601baa5cac863c2370c70ee5e12704ddf546865d110465816a4?w=1500&h=1500',
                    'https://pfst.cf2.poecdn.net/base/image/aaed2379f7e23e075ca9bc9f610b2e86770cdb19a9f6186fc926548a7977b67c?w=1500&h=1500'
                ],
                description: 'منتج ثوري مطور يجمع بين تحفيز البظر والتعزيز الذكوري في تصميم واحد مع اهتزازات متعددة.',
                rating: 4.9,
                reviews: 567,
                aiRecommended: true
            },
            { 
                id: 3, 
                name: 'دسار واقعي مع حلقة القضيب - 15 سم', 
                category: 'couples', 
                price: 245, 
                originalPrice: 420, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/65cfa6d99905502f17f84fc58231af66ad66a1358c2120881bdf864a128d66a5?w=1500&h=1500',
                    'https://pfst.cf2.poecdn.net/base/image/4862c5b8a7886bffd1a63762d679628b65ae155d079bbdaf73c7ec2a997537c8?w=1500&h=1500'
                ],
                description: 'منتج واقعي متطور للأزواج المغامرين مع 10 أوضاع اهتزاز مختلفة وتصميم قابل للفصل.',
                rating: 4.7,
                reviews: 423
            },
            { 
                id: 4, 
                name: 'هزاز نسائي بنفسجي - 13.5 سم', 
                category: 'women', 
                price: 135, 
                originalPrice: 235, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/07bd1c67d1840c6758512ec18724cbb5b23119feff2748a59febda0142c006ec?w=1500&h=1500',
                    'https://pfst.cf2.poecdn.net/base/image/1ca692af18e7225ada24429413102269c4ce2007279c66b151f2173505b6c3f5?w=1500&h=1500'
                ],
                description: 'هزاز أنثوي واقعي بنفسجي اللون مع 10 اهتزازات مختلفة، مصمم خصيصاً للراحة والمتعة.',
                rating: 4.8,
                reviews: 543,
                aiRecommended: true
            },
            { 
                id: 5, 
                name: 'حلقة القضيب الذكية - مقاوم للماء', 
                category: 'men', 
                price: 89, 
                originalPrice: 150, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c5a88b4ef2c93ccdcc8e5e88726ba73b5b2fcd0a72e2c86afc9c1ea2d1eabfe7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=منتج+5'
                ],
                description: 'حلقة ذكية مطورة من السيليكون الطبي مع تحكم في شدة الاهتزاز ومقاومة كاملة للماء.',
                rating: 4.6,
                reviews: 298,
                aiRecommended: true
            },
            { 
                id: 6, 
                name: 'مجموعة الأزواج الرومانسية', 
                category: 'couples', 
                price: 320, 
                originalPrice: 580, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e3a15f7b4c9e2a8d7b1f6e5c4d8a9b3c2e1f5a8b7c6d9e2a4b7c1e9f8d3a6b5c?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=مجموعة+رومانسية'
                ],
                description: 'مجموعة شاملة للأزواج تتضمن 5 قطع مختلفة لتجربة رومانسية متكاملة مع دليل الاستخدام.',
                rating: 4.9,
                reviews: 756,
                aiRecommended: true
            },
            { 
                id: 7, 
                name: 'هزاز نسائي ذكي بالتحكم عن بعد', 
                category: 'women', 
                price: 185, 
                originalPrice: 280, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f8c2e9a4b7d1f6e3c8b5a2f9d4c7e1a6b3f8c2e9a4b7d1f6e3c8b5a2f9d4c7e1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=تحكم+عن+بعد'
                ],
                description: 'هزاز ذكي متطور مع تطبيق للتحكم عن بعد، 12 نمط اهتزاز، وتصميم مريح وآمن.',
                rating: 4.8,
                reviews: 432,
                aiRecommended: true
            },
            { 
                id: 8, 
                name: 'دسار مرن للمبتدئين - 12 سم', 
                category: 'women', 
                price: 75, 
                originalPrice: 130, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a9c6e3f1b8d2e7a4c9f6b3e8d1c7f2a5b9c6e3f1b8d2e7a4c9f6b3e8d1c7f2a5?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=للمبتدئين'
                ],
                description: 'دسار مرن مثالي للمبتدئين، مصنوع من السيليكون الناعم مع قاعدة آمنة وتصميم مريح.',
                rating: 4.5,
                reviews: 289,
            },
            { 
                id: 9, 
                name: 'حلقة اهتزاز للأزواج - قابلة للشحن', 
                category: 'couples', 
                price: 155, 
                originalPrice: 240, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/d7a3f8c2b6e9d1f4a7c3b8e2f9d6a3c7b1f8e4d9c2a6f3b7e1d8c4f9a2b6e3d7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=للأزواج'
                ],
                description: 'حلقة اهتزاز مطورة للأزواج مع بطارية قابلة للشحن، 7 أنماط اهتزاز، وتصميم مريح.',
                rating: 4.7,
                reviews: 378,
                aiRecommended: true
            },
            { 
                id: 10, 
                name: 'مجموعة الإكسسوارات الفاخرة', 
                category: 'accessories', 
                price: 210, 
                originalPrice: 350, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c8f3a6b9e2d7c4f1a8b3e6d9c2f7a4b8e1d6c9f3a7b2e8d4c1f6a9b3e7d2c8f4?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=إكسسوارات+فاخرة'
                ],
                description: 'مجموعة إكسسوارات فاخرة تتضمن أقنعة، أربطة، زيوت طبيعية، وشموع عطرية لتجربة مميزة.',
                rating: 4.6,
                reviews: 445,
            },
            { 
                id: 11, 
                name: 'هزاز نسائي ثنائي التحفيز', 
                category: 'women', 
                price: 225, 
                originalPrice: 380, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/b5d9c7f2a6e8b4d1c9f7a3e6b2d8c5f1a9e7b4d2c6f9a3e8b1d7c4f2a6e9b5d8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=ثنائي+التحفيز'
                ],
                description: 'هزاز متطور بتحفيز ثنائي، تصميم مريح، 15 نمط اهتزاز، ومقاوم للماء بالكامل.',
                rating: 4.9,
                reviews: 612,
                aiRecommended: true
            },
            { 
                id: 12, 
                name: 'حلقة القضيب المتقدمة - تحكم ذكي', 
                category: 'men', 
                price: 125, 
                originalPrice: 200, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f1e8c4b7a3d9f6c2e8b5a1d7f4c9e3b6a2f8d1c7e4b9f6a3d2c8e5b1f7a4d9c6?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=تحكم+ذكي'
                ],
                description: 'حلقة ذكية متقدمة مع تحكم في القوة، مؤقت ذكي، وتصميم مريح يناسب جميع الأحجام.',
                rating: 4.7,
                reviews: 356,
            },
            { 
                id: 13, 
                name: 'دسار زجاجي فني - تصميم فريد', 
                category: 'women', 
                price: 165, 
                originalPrice: 250, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a4d7c1f9e6b3a8d2c7f4e1b9a6d3c8f2e7b4a1d6c9f5e2b8a4d1c7f6e3b9a5d8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=زجاجي+فني'
                ],
                description: 'دسار زجاجي عالي الجودة بتصميم فني فريد، آمن تماماً، قابل للتسخين والتبريد.',
                rating: 4.8,
                reviews: 234,
                aiRecommended: true
            },
            { 
                id: 14, 
                name: 'مجموعة التدليك الحسي', 
                category: 'couples', 
                price: 135, 
                originalPrice: 220, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e7b2a9d4c6f8e3b1a7d5c2f9e6b4a8d1c5f7e2b9a4d6c3f8e1b7a5d2c9f4e6b3?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=تدليك+حسي'
                ],
                description: 'مجموعة تدليك حسي تتضمن زيوت عطرية، ريش ناعم، وإكسسوارات تدليك متنوعة.',
                rating: 4.5,
                reviews: 389,
            },
            { 
                id: 15, 
                name: 'هزاز مضاد للماء - للاستحمام', 
                category: 'women', 
                price: 95, 
                originalPrice: 160, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c9f6a2e8d5c1f9a6e3d7c4f2a8e6d1c9f5a3e7d2c6f8a1e5d9c3f6a4e8d7c2f1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=للاستحمام'
                ],
                description: 'هزاز مقاوم للماء بالكامل، مثالي للاستحمام، 8 أنماط اهتزاز، وتصميم مريح للقبضة.',
                rating: 4.6,
                reviews: 267,
            },
            { 
                id: 16, 
                name: 'حلقة اهتزاز لاسلكية - بلوتوث', 
                category: 'couples', 
                price: 285, 
                originalPrice: 450, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/b3e9d6a4f2c8b7e1d5a9c6f3e8b2d4a7c1f6e9d3a5c8b4f1e7d2a6c9f5e3b8d1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=بلوتوث'
                ],
                description: 'حلقة اهتزاز ذكية مع اتصال بلوتوث، تحكم عبر التطبيق، ومزامنة مع الموسيقى.',
                rating: 4.9,
                reviews: 523,
                aiRecommended: true
            },
            { 
                id: 17, 
                name: 'دسار نابض بالحياة - متدرج الألوان', 
                category: 'women', 
                price: 110, 
                originalPrice: 180, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f8a1d4c7e3b9f2a6d8c4e1b7f5a9d3c6e2b8f4a1d7c9e5b3f6a2d8c1e7b4f9a5?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=متدرج+الألوان'
                ],
                description: 'دسار بألوان متدرجة جميلة، مصنوع من السيليكون عالي الجودة، مع إضاءة LED تفاعلية.',
                rating: 4.7,
                reviews: 198,
            },
            { 
                id: 18, 
                name: 'مجموعة الإثارة المتقدمة', 
                category: 'couples', 
                price: 395, 
                originalPrice: 650, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/d5a8c2f6e9d3a7c1f8e4b9d6a2c5f1e8b3d7a4c9f6e2b5a8d1c4f7e9b2a6d3c8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=إثارة+متقدمة'
                ],
                description: 'مجموعة شاملة متقدمة للأزواج مع 8 قطع مختلفة، حقيبة فاخرة، ودليل مصور.',
                rating: 4.8,
                reviews: 687,
                aiRecommended: true
            },
            { 
                id: 19, 
                name: 'هزاز صغير للسفر - محمول', 
                category: 'women', 
                price: 55, 
                originalPrice: 95, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a7c4f1e8b5d9a3c6f2e7b1d4a8c5f9e3b6d2a7c1f4e8b9d5a2c6f3e9b4d1a8c7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=للسفر'
                ],
                description: 'هزاز صغير مثالي للسفر، تصميم مدمج، صامت تماماً، وحقيبة حمل أنيقة.',
                rating: 4.4,
                reviews: 156,
            },
            { 
                id: 20, 
                name: 'حلقة ذكية متصلة - تطبيق VIP', 
                category: 'men', 
                price: 345, 
                originalPrice: 520, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e2b6d9c3f7a4e1b8d6c2f9a5e3b7d1c8f4a9e2b6d3c7f1a8e5b2d9c4f6a3e8b1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=تطبيق+VIP'
                ],
                description: 'حلقة ذكية فائقة التطور مع تطبيق VIP، تتبع الأداء، وإحصائيات مفصلة.',
                rating: 4.9,
                reviews: 423,
                aiRecommended: true
            },
            { 
                id: 21, 
                name: 'دسار بتقنية الاهتزاز الذكي', 
                category: 'women', 
                price: 275, 
                originalPrice: 420, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c8f4a1e7b3d9c5f2a8e4b1d6c9f7a3e5b8d2c4f1a7e9b6d3c1f8a4e2b7d5c9f6?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=اهتزاز+ذكي'
                ],
                description: 'دسار بتقنية الاهتزاز الذكي المتكيف، يتعلم تفضيلاتك، ويحفظ الإعدادات المفضلة.',
                rating: 4.8,
                reviews: 334,
                aiRecommended: true
            },
            { 
                id: 22, 
                name: 'مجموعة الألعاب الحسية الفاخرة', 
                category: 'couples', 
                price: 465, 
                originalPrice: 750, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/b9d2a6f3c8e5b1d7a4c9f6e2b8d3a5c1f7e9b4d6a2c8f5e1b9d4a7c3f8e6b2d1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=ألعاب+فاخرة'
                ],
                description: 'مجموعة الألعاب الحسية الفاخرة الأكثر تطوراً مع 12 قطعة مختلفة وحقيبة جلدية.',
                rating: 4.9,
                reviews: 789,
                aiRecommended: true
            },
            { 
                id: 23, 
                name: 'هزاز بتقنية التسخين الذكي', 
                category: 'women', 
                price: 195, 
                originalPrice: 310, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f6a3e9c1b7d4f2a8e5c9b3d6f1a4e7c2b8d5f9a3e6c1b4d7f2a9e8c5b1d3f6a7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=تسخين+ذكي'
                ],
                description: 'هزاز مبتكر بتقنية التسخين الذكي، درجة حرارة قابلة للتحكم، وتصميم مريح وآمن.',
                rating: 4.7,
                reviews: 267,
            },
            { 
                id: 24, 
                name: 'حلقة اهتزاز عن بعد - مدى 15 متر', 
                category: 'couples', 
                price: 165, 
                originalPrice: 260, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a8d5c2f9e3b6a1d4c7f8e5b2a9d6c3f1e8b4d7a2c5f9e6b3a1d8c4f2e7b9a5d6?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=مدى+15+متر'
                ],
                description: 'حلقة اهتزاز بتحكم عن بعد بمدى 15 متر، مثالية للمغامرات الرومانسية الخارجية.',
                rating: 4.6,
                reviews: 189,
            },
            { 
                id: 25, 
                name: 'دسار متحول - تصميم قابل للتشكيل', 
                category: 'women', 
                price: 145, 
                originalPrice: 230, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e1b8d4a7c9f6e2b5a8d3c1f7e9b4a6d2c8f5e1b7a9d6c3f4e8b2a5d1c7f9e3b6?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=قابل+للتشكيل'
                ],
                description: 'دسار مرن قابل للتشكيل حسب الرغبة، مادة ذكية تحتفظ بالشكل، وآمن بالكامل.',
                rating: 4.5,
                reviews: 213,
            },
            { 
                id: 26, 
                name: 'مجموعة الأزواج الذكية - AI مدمج', 
                category: 'couples', 
                price: 595, 
                originalPrice: 950, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/d7c3f8a2e6b9d4c1f5a8e3b6d9c2f7a4e1b8d5c9f3a6e2b7d1c4f8a9e5b3d6c2?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=AI+مدمج'
                ],
                description: 'مجموعة الأزواج الأكثر تطوراً بذكاء اصطناعي مدمج، تتعلم وتتكيف مع تفضيلاتكم.',
                rating: 5.0,
                reviews: 456,
                aiRecommended: true
            },
            { 
                id: 27, 
                name: 'هزاز بالأمواج الصوتية - تقنية جديدة', 
                category: 'women', 
                price: 225, 
                originalPrice: 350, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c4f9a5e2b8d6c3f1a7e4b9d2c5f8a1e6b3d9c7f4a2e8b5d1c6f9a3e7b4d8c2f5?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=أمواج+صوتية'
                ],
                description: 'هزاز ثوري بتقنية الأمواج الصوتية الجديدة، تجربة فريدة لا تُقارن بأي منتج آخر.',
                rating: 4.8,
                reviews: 178,
                aiRecommended: true
            },
            { 
                id: 28, 
                name: 'حلقة ذكية بشاشة LED', 
                category: 'men', 
                price: 195, 
                originalPrice: 290, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/b6e8d1a9c4f7b2e5a8d6c1f9b3e7a4d2c8f5b9e1a6d3c7f4b8e2a5d9c3f6a1e8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=شاشة+LED'
                ],
                description: 'حلقة ذكية مع شاشة LED تعرض المعلومات، تحكم كامل، وإعدادات قابلة للتخصيص.',
                rating: 4.7,
                reviews: 134,
            },
            { 
                id: 29, 
                name: 'دسار بالواقع الافتراضي - VR متوافق', 
                category: 'women', 
                price: 385, 
                originalPrice: 580, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f2a7c5e9b3d8f1a4c6e2b9d5a8c3f7e1b6d9a2c4f8e5b1d7a3c9f4e6b8d2a5c1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=VR+متوافق'
                ],
                description: 'دسار متطور متوافق مع تقنية الواقع الافتراضي لتجربة غامرة لا تُنسى.',
                rating: 4.9,
                reviews: 287,
                aiRecommended: true
            },
            { 
                id: 30, 
                name: 'مجموعة التدليك بالأحجار الساخنة', 
                category: 'accessories', 
                price: 175, 
                originalPrice: 280, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a9c7f4e1b5d8a6c2f9e3b7d1a4c8f5e2b9d6a3c1f7e4b8d2a6c9f3e5b1d4a7c8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=أحجار+ساخنة'
                ],
                description: 'مجموعة تدليك بالأحجار الساخنة الطبيعية، زيوت عطرية، وإكسسوارات سبا منزلي.',
                rating: 4.6,
                reviews: 145,
            },
            { 
                id: 31, 
                name: 'هزاز مقاوم للصدمات - للاستخدام الخارجي', 
                category: 'women', 
                price: 125, 
                originalPrice: 200, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e6b3d9a2c5f8e1b4d7a9c3f6e2b8d5a1c4f9e6b2d8a7c1f5e3b9d4a6c2f8e5b1?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=مقاوم+للصدمات'
                ],
                description: 'هزاز متين مقاوم للصدمات والماء، مثالي للاستخدام في الهواء الطلق والسفر.',
                rating: 4.5,
                reviews: 167,
            },
            { 
                id: 32, 
                name: 'حلقة اهتزاز بالذكاء الاصطناعي', 
                category: 'couples', 
                price: 445, 
                originalPrice: 670, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/d8a4c1f6e9b2d5a8c4f1e7b9d3a6c2f8e5b1d4a7c9f6e3b8d2a5c1f7e4b9d6a3?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=ذكاء+اصطناعي'
                ],
                description: 'حلقة اهتزاز بذكاء اصطناعي متطور، تتعلم وتتكيف، وتوفر تجربة مخصصة فريدة.',
                rating: 5.0,
                reviews: 234,
                aiRecommended: true
            },
            { 
                id: 33, 
                name: 'دسار بتقنية التدليك الاهتزازي', 
                category: 'women', 
                price: 165, 
                originalPrice: 250, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c7f2a8e5b1d9c3f6a2e8b5d1c7f4a9e6b3d2c8f1a5e9b4d7c2a6f3e8b1d5c9f7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=تدليك+اهتزازي'
                ],
                description: 'دسار مبتكر بتقنية التدليك الاهتزازي المتعدد النقاط، للاسترخاء والمتعة معاً.',
                rating: 4.7,
                reviews: 198,
            },
            { 
                id: 34, 
                name: 'مجموعة الحميمية الذكية الشاملة', 
                category: 'couples', 
                price: 695, 
                originalPrice: 1100, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/b1f8d6a3c9e2b7f4a1d8c5e9b3f6a2d7c1e8b4f9a6d3c8e5b2f1a7d9c4e6b8f2?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=ذكية+شاملة'
                ],
                description: 'المجموعة الأكثر شمولية وتطوراً بتقنيات ذكية متعددة، للأزواج المتقدمين.',
                rating: 5.0,
                reviews: 345,
                aiRecommended: true
            },
            { 
                id: 35, 
                name: 'هزاز بالتحكم الصوتي - تقنية AI', 
                category: 'women', 
                price: 285, 
                originalPrice: 420, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a5e9c3b7f1d4a8e2c6b9f5d1a3e7c4b8f2d9a6e1c7b4f8d2a5e3c9b6f1d7a4e8?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EC4899/FFFFFF?text=تحكم+صوتي'
                ],
                description: 'هزاز ثوري بتحكم صوتي ذكي، يستجيب للأوامر الصوتية ويتكيف مع نبرة الصوت.',
                rating: 4.8,
                reviews: 176,
                aiRecommended: true
            },
            { 
                id: 36, 
                name: 'حلقة ذكية بمستشعرات حيوية', 
                category: 'men', 
                price: 365, 
                originalPrice: 540, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f9d3a7c4e8b2f6d1a5c9e3b7f4d8a2c6e1b5f9d3a8c4e7b1f6d2a9c5e8b3f7d4?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/8B5CF6/FFFFFF?text=مستشعرات+حيوية'
                ],
                description: 'حلقة ذكية مع مستشعرات حيوية متقدمة، تراقب الأداء وتقدم تحليلات صحية.',
                rating: 4.9,
                reviews: 123,
                aiRecommended: true
            },
            { 
                id: 37, 
                name: 'دسار بالهولوجرام التفاعلي', 
                category: 'women', 
                price: 495, 
                originalPrice: 750, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/e4c8a1f7b5d3e9c2a6f8b4d1e7c5a9f3b8d6e2a4c1f9b7d5e3a8c2f6b1d4e9a7?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/10B981/FFFFFF?text=هولوجرام+تفاعلي'
                ],
                description: 'دسار مستقبلي بتقنية الهولوجرام التفاعلي، تجربة بصرية مذهلة مع الاستخدام.',
                rating: 5.0,
                reviews: 89,
                aiRecommended: true
            },
            { 
                id: 38, 
                name: 'مجموعة الخيال العلمي الإنتاجية', 
                category: 'couples', 
                price: 845, 
                originalPrice: 1350, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/c2b9f5a8d4e1c7b3f9a5d8e2c6b1f4a9d3e7c8b5f2a6d1e4c9b7f8a2d5e3c6b9?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/F59E0B/FFFFFF?text=خيال+علمي'
                ],
                description: 'مجموعة خيال علمي مستقبلية بتقنيات متطورة جداً، للأزواج الباحثين عن المستقبل.',
                rating: 5.0,
                reviews: 67,
                aiRecommended: true
            },
            { 
                id: 39, 
                name: 'هزاز بالطاقة الشمسية - صديق للبيئة', 
                category: 'women', 
                price: 155, 
                originalPrice: 240, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/a8f1d7c3e6b9a2f5d1c8e4b7f3d9a6c2e8b5f1d4a7c3e9b6f2d8a1c5e7b4f9d3?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/EF4444/FFFFFF?text=طاقة+شمسية'
                ],
                description: 'هزاز مبتكر يعمل بالطاقة الشمسية، صديق للبيئة، وشحن ذاتي في ضوء الشمس.',
                rating: 4.6,
                reviews: 112,
            },
            { 
                id: 40, 
                name: 'حلقة المستقبل - تقنيات جميع العصور', 
                category: 'couples', 
                price: 995, 
                originalPrice: 1500, 
                images: [
                    'https://pfst.cf2.poecdn.net/base/image/f6e2a9d5c1f8e4b7a3d6c9f2e5b1a8d4c7f9e3b6a2d5c8f1e7b4a9d3c6f8e2b5?w=1500&h=1500',
                    'https://via.placeholder.com/1500x1500/6366F1/FFFFFF?text=تقنيات+المستقبل'
                ],
                description: 'حلقة المستقبل التي تجمع جميع التقنيات المتطورة في منتج واحد، قمة الابتكار والتطور.',
                rating: 5.0,
                reviews: 45,
                aiRecommended: true
            }
        ];

        // Core Functions
        function confirmAge() {
            document.getElementById('age-verification').style.display = 'none';
            initParticles();
            initMatrixEffect();
            updateActivityFeed();
            showSmartNotification();
            updateWeatherRecommendations();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'products') {
                generateProducts();
            }
            
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Add XP for page navigation
            addXP(5, 'تصفح الصفحات');
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        // Language functions
        function toggleLanguageDropdown() {
            document.getElementById('language-dropdown').classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            const languages = {
                'ar': 'العربية',
                'en': 'English',
                'fr': 'Français',
                'tr': 'Türkçe'
            };
            
            document.getElementById('current-language').textContent = languages[lang];
            document.getElementById('language-dropdown').classList.remove('show');
            
            if (lang === 'ar') {
                document.documentElement.setAttribute('dir', 'rtl');
                document.documentElement.setAttribute('lang', 'ar');
            } else {
                document.documentElement.setAttribute('dir', 'ltr');
                document.documentElement.setAttribute('lang', lang);
            }
            
            showNotification(`🌐 تم تغيير اللغة إلى ${languages[lang]}`);
        }

        // Currency functions
        function toggleCurrencyDropdown() {
            document.getElementById('currency-dropdown').classList.toggle('show');
        }

        function changeCurrency(currency, symbol, rate) {
            currentCurrency = currency;
            currentCurrencySymbol = symbol;
            currentExchangeRate = rate;
            document.getElementById('current-currency').textContent = symbol;
            document.getElementById('currency-dropdown').classList.remove('show');
            updateAllPrices();
            showNotification(`💰 تم تغيير العملة إلى ${symbol}`);
        }

        function updateAllPrices() {
            document.querySelectorAll('.currency-price').forEach(element => {
                const basePrice = parseFloat(element.getAttribute('data-price'));
                const convertedPrice = (basePrice * currentExchangeRate).toFixed(2);
                element.textContent = `${convertedPrice} ${currentCurrencySymbol}`;
            });
            updateCartUI();
        }

        // Points system
        function updatePointsDisplay() {
            document.getElementById('user-points').textContent = userPoints;
            localStorage.setItem('userPoints', userPoints);
        }

        function addPoints(points, reason) {
            userPoints += points;
            updatePointsDisplay();
            showNotification(`+${points} نقطة! ${reason}`);
            addXP(points / 10, reason); // Convert points to XP
        }

        function shareWebsite() {
            shareCount++;
            localStorage.setItem('shareCount', shareCount);
            addPoints(100, 'مشاركة الموقع');
            
            if (shareCount % 10 === 0) {
                addPoints(1000, 'مكافأة 10 مشاركات!');
            }
        }

        function showShareModal() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="glass-effect p-10 max-w-md w-full mx-4 text-white">
                    <div class="text-center">
                        <i class="fas fa-share-alt text-5xl text-yellow-400 mb-6 animate-pulse"></i>
                        <h3 class="text-2xl font-bold mb-6 cyber-text">شارك واربح نقاط!</h3>
                        <p class="text-gray-200 mb-8">شارك الموقع مع أصدقائك واربح 100 نقطة لكل مشاركة</p>
                        
                        <div class="grid grid-cols-2 gap-4 mb-8">
                            <button onclick="shareToWhatsApp()" class="btn-primary bg-green-500 hover:bg-green-600">
                                <i class="fab fa-whatsapp mr-2"></i>
                                WhatsApp
                            </button>
                            <button onclick="shareToTelegram()" class="btn-primary bg-blue-500 hover:bg-blue-600">
                                <i class="fab fa-telegram mr-2"></i>
                                Telegram
                            </button>
                            <button onclick="shareToFacebook()" class="btn-primary bg-blue-600 hover:bg-blue-700">
                                <i class="fab fa-facebook mr-2"></i>
                                Facebook
                            </button>
                            <button onclick="copyWebsiteLink()" class="btn-primary bg-gray-600 hover:bg-gray-700">
                                <i class="fas fa-copy mr-2"></i>
                                نسخ الرابط
                            </button>
                        </div>
                        
                        <div class="points-card mb-6">
                            <p class="text-amber-800 text-lg font-bold">
                                <i class="fas fa-gift mr-2"></i>
                                عدد مشاركاتك: ${shareCount} | نقاطك: ${userPoints}
                            </p>
                        </div>
                        
                        <button onclick="this.closest('.fixed').remove()" class="btn-cyber">
                            إغلاق
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function shareToWhatsApp() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('🚀 اكتشف متجر المستقبل المدعوم بالذكاء الاصطناعي! تجربة تسوق لم تراها من قبل');
            window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
            shareWebsite();
        }

        function shareToTelegram() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('🤖 متجر المستقبل بتقنيات AI متطورة');
            window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank');
            shareWebsite();
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            shareWebsite();
        }

        function copyWebsiteLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification('📋 تم نسخ الرابط!');
                shareWebsite();
            });
        }

        // Generate products
        function generateProducts() {
            const grid = document.getElementById('products-grid');
            const filteredProducts = currentFilter === 'all' 
                ? products 
                : currentFilter === 'ai-recommended'
                ? products.filter(product => product.aiRecommended)
                : products.filter(product => product.category === currentFilter);

            generateFilteredProducts(filteredProducts);
        }

        function generateFilteredProducts(filteredProducts) {
            const grid = document.getElementById('products-grid');
            
            grid.innerHTML = filteredProducts.map(product => {
                const mainImage = product.images[0];
                const hasMultipleImages = product.images.length > 1;
                
                return `
                    <div class="product-card card-hover cursor-pointer" data-category="${product.category}" onclick="showProductModal('${product.id}')">
                        ${product.aiRecommended ? '<div class="absolute top-4 left-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold z-10">🤖 AI</div>' : ''}
                        <div class="discount-badge">خصم ${product.discount || Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}%</div>
                        <div class="product-image-container">
                            <img src="${mainImage}" alt="${product.name}" class="product-image">
                            ${hasMultipleImages ? '<div class="absolute bottom-4 right-4 bg-black bg-opacity-60 text-white px-3 py-2 rounded-lg text-sm"><i class="fas fa-images mr-1"></i>' + product.images.length + '</div>' : ''}
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-bold mb-3">${product.name}</h3>
                            <p class="text-gray-600 dark:text-gray-300 text-lg mb-4 line-clamp-2">${product.description}</p>
                            <div class="flex items-center mb-4">
                                <div class="flex text-yellow-400 text-lg">
                                    ${generateStarRating(product.rating)}
                                </div>
                                <span class="text-sm text-gray-500 mr-3">(${product.reviews} تقييم)</span>
                            </div>
                            <p class="stock-indicator mb-6">متوفر - كمية كبيرة</p>
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <span class="text-2xl font-bold text-primary currency-price" data-price="${product.price}">${(product.price * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                    <span class="text-lg text-gray-500 line-through mr-3">${(product.originalPrice * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                </div>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); addToCart('${product.id}', '${product.name}', ${product.price})" class="flex-1 btn-primary px-4 py-3">
                                    🛒 أضف للسلة
                                </button>
                                <button onclick="event.stopPropagation(); addToWishlist('${product.id}')" class="btn-secondary px-4 py-3">
                                    💝
                                </button>
                                <button onclick="event.stopPropagation(); view3DProduct('${product.id}')" class="btn-tertiary px-4 py-3">
                                    🎭
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function generateHomeProducts() {
            const homeGrid = document.getElementById('home-products-grid');
            
            homeGrid.innerHTML = products.slice(0, 6).map(product => {
                const mainImage = product.images[0];
                
                return `
                    <div class="product-card card-hover cursor-pointer" data-category="${product.category}" onclick="showProductModal('${product.id}')">
                        ${product.aiRecommended ? '<div class="absolute top-4 left-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold z-10">🤖 AI</div>' : ''}
                        <div class="discount-badge">خصم ${product.discount || Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}%</div>
                        <div class="product-image-container">
                            <img src="${mainImage}" alt="${product.name}" class="product-image">
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-bold mb-3">${product.name}</h3>
                            <p class="text-gray-600 dark:text-gray-300 text-lg mb-4 line-clamp-2">${product.description}</p>
                            <div class="flex items-center mb-4">
                                <div class="flex text-yellow-400 text-lg">
                                    ${generateStarRating(product.rating)}
                                </div>
                                <span class="text-sm text-gray-500 mr-3">(${product.reviews} تقييم)</span>
                            </div>
                            <p class="stock-indicator mb-6">متوفر - كمية كبيرة</p>
                            <div class="flex justify-between items-center mb-4">
                                <div>
                                    <span class="text-2xl font-bold text-primary currency-price" data-price="${product.price}">${(product.price * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                    <span class="text-lg text-gray-500 line-through mr-3">${(product.originalPrice * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                </div>
                            </div>
                            <div class="flex space-x-2 space-x-reverse">
                                <button onclick="event.stopPropagation(); addToCart('${product.id}', '${product.name}', ${product.price})" class="flex-1 btn-primary px-4 py-3">
                                    🛒 أضف للسلة
                                </button>
                                <button onclick="event.stopPropagation(); addToWishlist('${product.id}')" class="btn-secondary px-4 py-3">
                                    💝
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function generateStarRating(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 !== 0;
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - Math.ceil(rating);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        function showProductModal(productId) {
            const product = products.find(p => p.id == productId);
            if (!product) return;

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="glass-effect max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-8 border-b border-white/20">
                        <div class="flex justify-between items-center">
                            <h2 class="text-3xl font-bold text-white cyber-text">${product.name}</h2>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-300 hover:text-white text-3xl">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="p-8">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                            <div>
                                <div class="mb-6">
                                    <img id="main-product-image" src="${product.images[0]}" alt="${product.name}" class="w-full h-96 object-cover rounded-2xl shadow-2xl">
                                </div>
                                ${product.images.length > 1 ? `
                                    <div class="grid grid-cols-4 gap-3">
                                        ${product.images.map((img, index) => `
                                            <img src="${img}" alt="${product.name}" 
                                                 class="w-full h-24 object-cover rounded-xl cursor-pointer border-3 hover:border-yellow-400 transition-colors ${index === 0 ? 'border-yellow-400' : 'border-white/20'}" 
                                                 onclick="changeMainImage('${img}', this)">
                                        `).join('')}
                                    </div>
                                ` : ''}
                                
                                <!-- VR/AR Preview Buttons -->
                                <div class="mt-6 grid grid-cols-2 gap-4">
                                    <button onclick="view3DProduct('${product.id}')" class="btn-cyber py-3">
                                        🎭 مشاهدة 3D
                                    </button>
                                    <button onclick="startARMode()" class="btn-secondary py-3">
                                        📱 تجربة AR
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-white">
                                <div class="mb-6">
                                    ${product.aiRecommended ? '<div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full text-sm font-bold mb-4 inline-block">🤖 موصى بالذكاء الاصطناعي</div>' : ''}
                                    <div class="flex items-center mb-4">
                                        <div class="flex text-yellow-400 text-xl">
                                            ${generateStarRating(product.rating)}
                                        </div>
                                        <span class="text-lg text-gray-300 mr-3">(${product.reviews} تقييم)</span>
                                        <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold mr-3">متوفر</span>
                                    </div>
                                    <div class="flex items-center space-x-6 space-x-reverse mb-6">
                                        <span class="text-4xl font-bold text-yellow-400 currency-price" data-price="${product.price}">${(product.price * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                        <span class="text-2xl text-gray-400 line-through">${(product.originalPrice * currentExchangeRate).toFixed(2)} ${currentCurrencySymbol}</span>
                                        <span class="bg-red-500 text-white px-3 py-2 rounded-xl text-lg font-bold">خصم ${Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)}%</span>
                                    </div>
                                </div>
                                
                                <div class="mb-8">
                                    <h3 class="text-2xl font-bold mb-4">الوصف:</h3>
                                    <p class="text-gray-200 mb-4 text-lg">${product.description}</p>
                                    ${product.fullDescription ? `<p class="text-gray-300 text-lg">${product.fullDescription}</p>` : ''}
                                </div>

                                ${product.features ? `
                                    <div class="mb-8">
                                        <h3 class="text-2xl font-bold mb-4">المميزات:</h3>
                                        <ul class="space-y-3">
                                            ${product.features.map(feature => `
                                                <li class="flex items-center">
                                                    <i class="fas fa-check-circle text-green-400 mr-3 text-lg"></i>
                                                    <span class="text-lg">${feature}</span>
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                ` : ''}

                                ${product.specifications ? `
                                    <div class="mb-8">
                                        <h3 class="text-2xl font-bold mb-4">المواصفات:</h3>
                                        <ul class="space-y-3">
                                            ${product.specifications.map(spec => `
                                                <li class="flex items-center">
                                                    <i class="fas fa-info-circle text-blue-400 mr-3 text-lg"></i>
                                                    <span class="text-lg">${spec}</span>
                                                </li>
                                            `).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                                
                                <div class="flex space-x-4 space-x-reverse mb-6">
                                    <button onclick="addToCart('${product.id}', '${product.name}', ${product.price}); this.closest('.fixed').remove();" class="flex-1 btn-cyber py-4 text-xl font-bold">
                                        <i class="fas fa-shopping-cart mr-2"></i>
                                        أضف للسلة
                                    </button>
                                    <button onclick="addToWishlist('${product.id}')" class="bg-pink-500 text-white px-8 py-4 rounded-xl text-xl hover:bg-pink-600 transition-colors">
                                        <i class="fas fa-heart"></i>
                                    </button>
                                </div>

                                <div class="flex space-x-4 space-x-reverse">
                                    <button onclick="shareProduct('${product.name}')" class="flex-1 bg-green-500 text-white py-3 rounded-xl hover:bg-green-600 transition-colors">
                                        <i class="fas fa-share-alt mr-2"></i>
                                        شارك المنتج
                                    </button>
                                    <button onclick="startVoiceSearch()" class="bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-colors">
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function changeMainImage(imageSrc, element) {
            document.getElementById('main-product-image').src = imageSrc;
            
            element.parentElement.querySelectorAll('img').forEach(img => {
                img.classList.remove('border-yellow-400');
                img.classList.add('border-white/20');
            });
            element.classList.remove('border-white/20');
            element.classList.add('border-yellow-400');
        }

        function shareProduct(productName) {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`🚀 تحقق من هذا المنتج الرائع من متجر المستقبل: ${productName}`);
            window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
            addPoints(50, 'مشاركة منتج');
        }

        // Filter products
        function filterProducts(category) {
            currentFilter = category;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'hover:bg-gray-300', 'dark:hover:bg-gray-600');
            });
            
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'hover:bg-gray-300', 'dark:hover:bg-gray-600');
            event.target.classList.add('btn-primary');
            
            generateProducts();
            addXP(5, 'استخدام الفلاتر');
        }

        // Cart functions
        function addToCart(id, name, price) {
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id, name, price, quantity: 1 });
            }
            
            updateCartUI();
            showNotification('🛒 تم إضافة المنتج للسلة');
            addXP(20, 'إضافة منتج للسلة');
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateCartUI();
        }

        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    updateCartUI();
                }
            }
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartShipping = document.getElementById('cart-shipping');
            const cartTotal = document.getElementById('cart-total');
            const cartAiDiscount = document.getElementById('cart-ai-discount');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const convertedSubtotal = subtotalPrice * currentExchangeRate;
            
            let shippingCost = 15 * currentExchangeRate;
            if (convertedSubtotal >= 300 * currentExchangeRate) {
                shippingCost = 0;
            }
            
            // AI Discount based on user level
            const aiDiscount = userLevel * 2 * currentExchangeRate; // 2 units per level
            const totalPrice = Math.max(0, convertedSubtotal + shippingCost - aiDiscount);
            
            cartCount.textContent = totalItems;
            
            if (cartSubtotal) cartSubtotal.textContent = `${convertedSubtotal.toFixed(2)} ${currentCurrencySymbol}`;
            if (cartShipping) cartShipping.textContent = shippingCost === 0 ? 'مجاني' : `${shippingCost.toFixed(2)} ${currentCurrencySymbol}`;
            if (cartAiDiscount) cartAiDiscount.textContent = `-${aiDiscount.toFixed(2)} ${currentCurrencySymbol}`;
            if (cartTotal) cartTotal.textContent = `${totalPrice.toFixed(2)} ${currentCurrencySymbol}`;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center text-gray-300 py-12 text-xl">🛒 السلة فارغة</p>';
            } else {
                cartItems.innerHTML = cart.map(item => {
                    const convertedPrice = item.price * currentExchangeRate;
                    return `
                        <div class="flex items-center justify-between border-b border-white/20 py-6">
                            <div class="flex-1">
                                <h3 class="font-bold text-white text-lg">${item.name}</h3>
                                <p class="text-gray-300 text-lg">${convertedPrice.toFixed(2)} ${currentCurrencySymbol}</p>
                            </div>
                            <div class="flex items-center space-x-3 space-x-reverse">
                                <button onclick="updateQuantity('${item.id}', -1)" class="bg-white/20 w-10 h-10 rounded-full hover:bg-white/30 text-white">-</button>
                                <span class="mx-3 min-w-[3rem] text-center text-white text-lg">${item.quantity}</span>
                                <button onclick="updateQuantity('${item.id}', 1)" class="bg-white/20 w-10 h-10 rounded-full hover:bg-white/30 text-white">+</button>
                                <button onclick="removeFromCart('${item.id}')" class="text-red-400 mr-3 hover:text-red-300 text-lg">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.classList.toggle('hidden');
            modal.classList.toggle('flex');
        }

        function showOrderForm() {
            showCustomModal(`
                <div class="text-6xl mb-6">🛍️</div>
                <h3 class="text-3xl font-bold mb-6 text-white">إتمام الطلب</h3>
                <div class="bg-blue-100 dark:bg-blue-900 p-6 rounded-xl mb-8">
                    <p class="text-blue-800 dark:text-blue-200 text-xl">🚀 قريباً: نظام طلبات متطور</p>
                    <p class="text-blue-700 dark:text-blue-300 text-lg mt-3">سيتم إضافة نظام طلبات شامل مع دفع رقمي</p>
                </div>
                <button onclick="closeModal(); showNotification('📞 سيتم التواصل معك قريباً');" class="w-full btn-cyber py-4 text-xl">
                    موافق
                </button>
            `, 'max-w-lg');
        }

        // Code verification - enhanced with better integration
        document.addEventListener('DOMContentLoaded', function() {
            const codeForm = document.getElementById('code-form');
            if (codeForm) {
                codeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const code = document.getElementById('secret-code').value.trim().toUpperCase();
                    
                    // Set timestamp and tracking info
                    document.getElementById('code-timestamp').value = new Date().toISOString();
                    document.getElementById('user-ip').value = 'Hidden for privacy';
                    document.getElementById('page-url').value = window.location.href;
                    
                    const validCodes = {
                        'VIP2024': { type: 'discount', value: 70, description: 'خصم 70% على جميع المنتجات!' },
                        'FREESHIP': { type: 'freeShipping', value: true, description: 'شحن مجاني على جميع الطلبات!' },
                        'GIFT50': { type: 'points', value: 500, description: '500 نقطة مجانية!' },
                        'GOLD777': { type: 'exclusive', value: 90, description: 'خصم حصري 90% + منتج مجاني!' },
                        'SUPER50': { type: 'super', value: 50, description: 'خصم فوري 50% + توصيل مجاني!' },
                        'AI2024': { type: 'ai', value: 1000, description: 'مكافأة AI خاصة: 1000 نقطة!' },
                        'CYBER': { type: 'cyber', value: 80, description: 'خصم سايبر 80% + تجربة VR مجانية!' }
                    };
                    
                    if (validCodes[code]) {
                        // Show loading animation
                        showCodeLoading();
                        
                        // Submit to FormSubmit
                        const formData = new FormData(this);
                        
                        fetch('https://formsubmit.co/kaliroot123m@gmail.com', {
                            method: 'POST',
                            body: formData
                        }).then(() => {
                            // Apply the benefit after successful submission
                            setTimeout(() => {
                                applyCodeBenefit(validCodes[code]);
                                showCodeSuccess(validCodes[code]);
                                addXP(100, 'إدخال كود سري');
                            }, 2000);
                        }).catch(() => {
                            // Even if submission fails, show success for UX
                            setTimeout(() => {
                                applyCodeBenefit(validCodes[code]);
                                showCodeSuccess(validCodes[code]);
                                addXP(100, 'إدخال كود سري');
                            }, 2000);
                        });
                    } else {
                        showCodeError();
                    }
                });
            }
        });

        function showCodeLoading() {
            const loadingModal = document.createElement('div');
            loadingModal.id = 'code-loading-modal';
            loadingModal.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50';
            loadingModal.innerHTML = `
                <div class="glass-effect p-12 text-center text-white max-w-md w-full mx-4">
                    <div class="animate-spin rounded-full h-20 w-20 border-b-4 border-yellow-400 mx-auto mb-6"></div>
                    <h3 class="text-2xl font-black mb-4 cyber-text">🔐 جاري تفعيل الكود...</h3>
                    <p class="text-gray-200 text-lg font-bold">يرجى الانتظار</p>
                    <div class="mt-6 bg-yellow-500/20 p-4 rounded-xl">
                        <p class="text-yellow-300 text-sm font-bold">⚡ نحقق من صحة الكود بالذكاء الاصطناعي</p>
                    </div>
                </div>
            `;
            document.body.appendChild(loadingModal);
        }

        function applyCodeBenefit(benefit) {
            // Apply the benefit logic here
            if (benefit.type === 'points' || benefit.type === 'ai') {
                addPoints(benefit.value, 'كود سري');
            }
            
            // Remove loading modal
            const loadingModal = document.getElementById('code-loading-modal');
            if (loadingModal) {
                loadingModal.remove();
            }
        }



        function showCodeError() {
            showCustomModal(`
                <div class="text-8xl mb-6">❌</div>
                <h3 class="text-3xl font-bold mb-6 text-red-600 cyber-text">كود غير صحيح!</h3>
                <div class="bg-red-100 dark:bg-red-900 p-6 rounded-xl mb-8">
                    <p class="text-red-800 dark:text-red-200 text-xl">الكود المدخل غير صحيح أو منتهي الصلاحية</p>
                    <p class="text-red-700 dark:text-red-300 text-lg mt-3">💡 جرب: VIP2024, CYBER, AI2024</p>
                </div>
                <button onclick="closeModal()" class="w-full btn-cyber py-4 text-xl">
                    حاول مرة أخرى
                </button>
            `, 'max-w-lg');
        }

        // Utility functions
        function showCustomModal(content, maxWidth = 'max-w-md') {
            const modal = document.createElement('div');
            modal.id = 'custom-modal';
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="glass-effect p-10 ${maxWidth} w-full text-center text-white">
                    ${content}
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeModal() {
            const modal = document.getElementById('custom-modal');
            if (modal) {
                modal.remove();
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-2 rounded-lg shadow-lg z-50 text-sm font-medium border border-white/20 max-w-xs';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Simple smooth animation
            notification.style.transform = 'translateX(100%)';
            notification.style.transition = 'transform 0.3s ease';
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Close dropdowns when clicking outside
        window.onclick = function(event) {
            if (!event.target.closest('.currency-dropdown')) {
                const dropdowns = document.querySelectorAll('.dropdown-content');
                dropdowns.forEach(dropdown => {
                    if (dropdown.classList.contains('show')) {
                        dropdown.classList.remove('show');
                    }
                });
            }
        }

        // Handle URL hash changes for navigation
        function handleHashChange() {
            const hash = window.location.hash.substring(1);
            if (hash && ['home', 'products', 'ai-recommendations', 'vr-experience', 'social-shopping', 'code', 'contact'].includes(hash)) {
                showPage(hash);
            }
        }

        window.addEventListener('hashchange', handleHashChange);

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateCartUI();
            updateWishlistUI();
            updateAllPrices();
            updatePointsDisplay();
            updateLevelDisplay();
            generateHomeProducts();
            generateProducts();
            setMood(currentMood);
            
            // Handle initial hash
            handleHashChange();
            
            // If no hash, show home page
            if (!window.location.hash) {
                showPage('home');
            }

            // Initialize typewriter effect
            const typewriterText = document.getElementById('typewriter-text');
            if (typewriterText) {
                const texts = [
                    '🌸 تجربة تسوق مدعومة بالذكاء الاصطناعي 🌸',
                    '🚀 المستقبل في راحة يدك 🚀',
                    '🤖 مساعد ذكي يفهم احتياجاتك 🤖',
                    '🎭 واقع افتراضي مذهل 🎭'
                ];
                let currentText = 0;
                
                setInterval(() => {
                    typewriterText.textContent = texts[currentText];
                    currentText = (currentText + 1) % texts.length;
                }, 4000);
            }

            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                    stopVoiceSearch();
                }
                if (e.ctrlKey && e.key === 'k') {
                    e.preventDefault();
                    document.getElementById('smart-search').focus();
                }
                if (e.ctrlKey && e.key === 'm') {
                    e.preventDefault();
                    startVoiceSearch();
                }
            });
        });
    </script>



</body></html>